{"version":3,"sources":["webpack:///./src/pages/local/share/index.vue?abd5","webpack:///./src/pages/local/components/header.vue?6ccb","webpack:///./src/pages/local/components/header.vue?8b6c","webpack:///src/pages/local/components/header.vue","webpack:///./src/pages/local/components/header.vue?eac6","webpack:///./src/pages/local/components/header.vue","webpack:///./src/pages/local/share/index.vue?828f","webpack:///src/pages/local/share/index.vue","webpack:///./src/pages/local/share/index.vue?fafd","webpack:///./src/pages/local/share/index.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_2_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_2_3_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_less__WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_2_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_2_3_node_modules_vue_loader_lib_index_js_vue_loader_options_header_vue_vue_type_style_index_0_lang_less__WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","staticClass","style","display","back","on","click","$event","handleBack","close","handleClose","share","handleShare","_e","staticRenderFns","headervue_type_script_lang_js","name","data","props","Boolean","computed","Object","objectSpread","vuex_esm","methods","home","$router","push","UA","indexOf","setupWebViewJavascriptBridge","bridge","callHandler","window","exitPage","e","Toast","components_headervue_type_script_lang_js","component","componentNormalizer","__webpack_exports__","class","in-app","IS_APP","attrs","ref","src","makeFileUrl","user","avatar","crossOrigin","levelData","logo","_v","_s","fullname","score","tip","_m","tag","value","qrcode","val","size","id","toShare","shareData","sharevue_type_script_lang_js","isApp","$store","state","isLogin","showData","imgUrl","components","localHeader","header","QrcodeVue","qrcode_vue_esm","created","mint_ui_common","open","console","log","IS_WX","initWxConfig","IS_DEV","activityId","objectID","salt","statistic","signSalt","answerId","endData","userAnswerId","level","parseInt","mounted","setTimeout","drawHtmlToCanvas","type","ua","url","img","responseCallback","inviteNewerAction","JSON","stringify","utils","self","container","$refs","canvasContainer","then","document","getElementById","_ref","result","local_sharevue_type_script_lang_js"],"mappings":"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","file":"js/5.fb9e1ead.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-oneOf-2-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-2-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-2-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-oneOf-2-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-2-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-2-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-oneOf-2-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-2-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-2-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=style&index=0&lang=less\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-oneOf-2-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-2-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-2-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=style&index=0&lang=less\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.V_1_2_3)?_c('header',{staticClass:\"header\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"common back\",style:({display: _vm.back ? 'block' : 'none'}),on:{\"click\":function($event){_vm.handleBack()}}}),_c('div',{staticClass:\"common close\",style:({display: _vm.close ? 'block' : 'none'}),on:{\"click\":function($event){_vm.handleClose()}}})]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"common share\",style:({display: _vm.share ? 'block' : 'none'}),on:{\"click\":function($event){_vm.handleShare()}}})])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <header v-if=\"V_1_2_3\" class=\"header\">\n    <div class=\"left\">\n      <div class=\"common back\" :style=\"{display: back ? 'block' : 'none'}\" @click=\"handleBack()\"></div>\n      <div class=\"common close\" :style=\"{display: close ? 'block' : 'none'}\" @click=\"handleClose()\"></div>\n    </div>\n    <div class=\"right\">\n      <div class=\"common share\" :style=\"{display: share ? 'block' : 'none'}\" @click=\"handleShare()\"></div>\n    </div>\n  </header>\n</template>\n<script>\n  import {mapState} from 'vuex';\n  export default {\n    name: 'tjHeader',\n    data() {\n      return {}\n    },\n    props: {\n      back: Boolean,\n      close: Boolean,\n      share: Boolean\n    },\n    computed: {\n      ...mapState(['UA', 'V_1_2_3'])\n    },\n    methods: {\n      handleBack() {\n        if (this.home) {\n          this.$router.push({\n            name: 'localIndex'\n          });\n        } else {\n          this.$router.back();\n        }\n      },\n      handleClose() {\n        if (this.UA.indexOf(\"closer-ios\") > -1) {\n          setupWebViewJavascriptBridge(function(bridge) {\n            if (bridge) {\n              bridge.callHandler(\"exitPage\")\n            }\n          })\n        } else if (this.UA.indexOf(\"closer-android\") > -1) {\n          if (typeof window.bridge != \"undefined\") {\n            try {\n              window.bridge.exitPage();\n            } catch (e) {\n              Toast(\"请升级最新版本客户端\")\n            }\n          }\n        }\n      },\n      // 点击分享跳转到分享页\n      handleShare() {\n        this.$router.push({\n          name: 'localShare'\n        })\n      }\n    }\n  }\n</script>\n<style lang=\"less\">\n.header {\n  position: relative;\n  height: 76pr;\n  margin-bottom: 20pr;\n  z-index: 999;\n  .left, .right {\n    position: absolute;\n    top: 0;\n    height: 100%;\n  }\n  .left {\n    left: 20pr;\n  }\n  .right {\n    right: 20pr;\n  }\n  .common {\n    width: 68pr;\n    height: 76pr;\n  }\n  .back {\n    float: left;\n    margin-right: 20pr;\n    background: url(../assets/images/back.png) center no-repeat;\n    background-size: contain;\n  }\n  .close {\n    float: left;\n    background: url(../assets/images/close.png) center no-repeat;\n    background-size: contain;\n  }\n  .share {\n    float: right;\n    background: url(../assets/images/index_share.png) center no-repeat;\n    background-size: contain;\n  }\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./header.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./header.vue?vue&type=template&id=3a654d55\"\nimport script from \"./header.vue?vue&type=script&lang=js\"\nexport * from \"./header.vue?vue&type=script&lang=js\"\nimport style0 from \"./header.vue?vue&type=style&index=0&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main local-share\",class:{'in-app': _vm.IS_APP}},[(_vm.IS_APP)?_c('local-header',{attrs:{\"back\":\"\",\"home\":\"\"}}):_vm._e(),_c('div',{staticClass:\"share-wrapper\"},[_c('div',{staticClass:\"share-container\"},[_c('div',{ref:\"canvasContainer\",staticClass:\"share-box\"},[(_vm.answerId)?_c('div',{staticClass:\"share-score\"},[_c('div',{staticClass:\"share-user-img\"},[_c('img',{staticClass:\"share-user-avatar\",attrs:{\"src\":_vm.makeFileUrl(_vm.user.avatar),\"crossOrigin\":\"Anonymous\"}}),_c('div',{class:'share-user-filter '+_vm.levelData.logo})]),_c('div',{staticClass:\"share-user-name\"},[_vm._v(_vm._s(_vm.user.fullname))]),_c('div',{staticClass:\"share-desc\"},[_vm._v(\"\\n            在【谁是成都最土著】中获得\\n            \"),_c('span',{staticClass:\"share-desc-score\"},[_vm._v(\" \"+_vm._s(_vm.score))]),_vm._v(\" 分，\\n            \"),_c('br'),_c('span',{staticClass:\"share-desc-tip\"},[_vm._v(_vm._s(_vm.levelData.tip))])]),_vm._m(0),_c('div',{class:'share-tag '+_vm.levelData.tag}),_c('div',{staticClass:\"share-qrcode\"},[_c('qrcode-vue',{attrs:{\"value\":_vm.qrcode.val,\"size\":_vm.qrcode.size}})],1),_c('div',{staticClass:\"share-tip\"},[_vm._v(\"长按识别二维码参与游戏，和他Pk吧\")])]):_c('div',{staticClass:\"share-default\"},[_c('div',{staticClass:\"share-qrcode\"},[_c('qrcode-vue',{attrs:{\"value\":_vm.qrcode.val,\"size\":_vm.qrcode.size}})],1)]),_c('img',{staticClass:\"share-img\",attrs:{\"id\":\"share-img\",\"src\":\"\"}})])]),(_vm.IS_APP)?_c('div',{staticClass:\"share-items box box-lr box-center-center\"},[_c('div',{staticClass:\"item item1 box box-tb box-center-center\",on:{\"click\":function($event){_vm.toShare('inviteNewGuyActionWeChat', _vm.shareData)}}},[_c('span',{staticClass:\"weixin\"}),_c('span',[_vm._v(\"好友\")])]),_c('div',{staticClass:\"item item2 box box-tb box-center-center\",on:{\"click\":function($event){_vm.toShare('inviteNewGuyActionWxTimeLine', _vm.shareData)}}},[_c('span',{staticClass:\"pyq\"}),_c('span',[_vm._v(\"朋友圈\")])]),_c('div',{staticClass:\"item item3 box box-tb box-center-center\",on:{\"click\":function($event){_vm.toShare('inviteNewGuyActionSavePicture', _vm.shareData)}}},[_c('span',{staticClass:\"download\"}),_c('span',[_vm._v(\"保存至相册\")])])]):_vm._e()])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"share-title box box-lr box-center-center\"},[_c('div',{staticClass:\"line left\"}),_c('div',{staticClass:\"name\"},[_vm._v(\"获得称号\")]),_c('div',{staticClass:\"line right\"})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main local-share\" :class=\"{'in-app': IS_APP}\">\n    <local-header v-if=\"IS_APP\" back home></local-header>\n    <div class=\"share-wrapper\">\n      <div class=\"share-container\">\n        <div ref=\"canvasContainer\" class=\"share-box\">\n          <div v-if=\"answerId\" class=\"share-score\">\n            <div class=\"share-user-img\">\n              <img :src=\"makeFileUrl(user.avatar)\" class=\"share-user-avatar\" crossOrigin=\"Anonymous\">\n              <div :class=\"'share-user-filter '+levelData.logo\"></div>\n            </div>\n             <div class=\"share-user-name\">{{user.fullname}}</div>\n            <div class=\"share-desc\">\n              在【谁是成都最土著】中获得\n              <span class=\"share-desc-score\"> {{score}}</span> 分，\n              <br/>\n              <span class=\"share-desc-tip\">{{levelData.tip}}</span>\n            </div> \n            <div class=\"share-title box box-lr box-center-center\">\n              <div class=\"line left\"></div>\n              <div class=\"name\">获得称号</div>\n              <div class=\"line right\"></div>\n            </div>\n            <div :class=\"'share-tag '+levelData.tag\"></div>\n             <div class=\"share-qrcode\"> \n              <qrcode-vue :value=\"qrcode.val\" :size=\"qrcode.size\"></qrcode-vue>\n            </div>\n            <div class=\"share-tip\">长按识别二维码参与游戏，和他Pk吧</div>\n          </div>\n          <div v-else class=\"share-default\">\n            <div class=\"share-qrcode\">\n              <qrcode-vue :value=\"qrcode.val\" :size=\"qrcode.size\"></qrcode-vue>\n            </div>\n          </div>\n          <img class=\"share-img\" id=\"share-img\" src=\"\">\n        </div>\n      </div>\n      <div v-if=\"IS_APP\" class=\"share-items box box-lr box-center-center\">\n        <div class=\"item item1 box box-tb box-center-center\" @click=\"toShare('inviteNewGuyActionWeChat', shareData)\">\n          <span class=\"weixin\"></span>\n          <span>好友</span>\n        </div>\n        <div class=\"item item2 box box-tb box-center-center\" @click=\"toShare('inviteNewGuyActionWxTimeLine', shareData)\">\n          <span class=\"pyq\"></span>\n          <span>朋友圈</span>\n        </div>\n        <div class=\"item item3 box box-tb box-center-center\" @click=\"toShare('inviteNewGuyActionSavePicture', shareData)\">\n          <span class=\"download\"></span>\n          <span>保存至相册</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {\n    Toast,\n    Indicator\n  } from 'mint-ui';\n  import {\n    mapState,\n    mapActions\n  } from \"vuex\";\n  import localHeader from '../components/header';\n  import {\n    makeFileUrl,\n    addParamsForUrl,\n    html2Image,\n    tjUploadFile\n  } from '../../../utils/utils'\n  import QrcodeVue from 'qrcode.vue';\n  export default {\n    data() {\n      return {\n        isApp: this.$store.state.IS_APP,\n        isLogin: false,\n        qrcode: {\n          val: 'https://a.tiejin.cn/local',\n          size: 80\n        },\n        showData: [{\n          logo: 'user-img-1',\n          tip: '赢得5元红包！',\n          tag: 'share-tag-1'\n        }, {\n          logo: 'user-img-2',\n          tip: '赢得2元现金红包，全答对可得5元哦！',\n          tag: 'share-tag-2'\n        }, {\n          logo: 'user-img-3',\n          tip: '和5元现金红包失之交臂，你要来试试吗？',\n          tag: 'share-tag-3'\n        }],\n        imgUrl: ''\n      }\n    },\n    components: {\n      localHeader,\n      QrcodeVue\n    },\n    created() {\n      Indicator.open();\n      console.log('isAPP', this.isApp)\n      // this.userShare()\n      if (this.IS_WX) {\n        console.log('share wxshare--')\n        this.initWxConfig()\n      }\n      if (this.IS_DEV) {\n        this.qrcode.val = 'https://a-sandbox.tiejin.cn/local?activityId=' + this.activityId + '&inviter=' + this.objectID + '&salt=' + this.salt\n      } else {\n        this.qrcode.val = 'https://a.tiejin.cn/local?activityId=' + this.activityId + '&inviter=' + this.objectID + '&salt=' + this.salt\n      }\n    },\n    computed: {\n      ...mapState(['IS_DEV', 'IS_APP', 'IS_WX']),\n      ...mapState('local', {\n        objectID: state => state.user.objectID || '',\n        salt: state => state.statistic.signSalt,\n        activityId: state => state.activityId,\n        user: state => state.user,\n        answerId: state => state.endData.userAnswerId,\n        shareData: state => state.shareData,\n        level: state => state.endData.level,\n        score: state => state.endData.score\n      }),\n      levelData() {\n        return this.showData[parseInt(this.level) - 1]\n      }\n    },\n    mounted() {\n      console.log('answerId:', this.answerId)\n      setTimeout(this.drawHtmlToCanvas, 100)\n    },\n    methods: {\n      ...mapActions(\"local\", [\n        \"wechatConfig\",\n        \"userShare\",\n        \"checkLoginInApp\",\n        \"initWxConfig\"\n      ]),\n      toShare(type) {\n        let ua = this.$store.state.UA\n        let url = this.imgUrl;\n        console.log('share--', type, url, ua)\n        if (ua.indexOf(\"closer-ios\") > -1) {\n          setupWebViewJavascriptBridge(function(bridge) {\n            console.log(\"toShare ios bridge\", bridge)\n            if (bridge) {\n              bridge.callHandler(\"inviteNewerAction\", {\n                \"type\": type,\n                \"img\": url\n              }, function(data, responseCallback) {})\n            }\n          })\n        } else if (ua.indexOf(\"closer-android\") > -1) {\n          console.log(\"toShare android bridge\", bridge)\n          if (typeof window.bridge != \"undefined\") {\n            try {\n              window.bridge.inviteNewerAction(JSON.stringify({\n                \"type\": type,\n                \"img\": url\n              }));\n            } catch (e) {\n              Toast(\"请升级最新版本客户端\")\n            }\n          }\n        }\n      },\n      makeFileUrl(url) {\n        let avatar = makeFileUrl(url)\n        return avatar\n      },\n      drawHtmlToCanvas() {\n        let self = this;\n        let container = self.$refs.canvasContainer;\n        html2Image(container).then(img => {\n          // img.setAttribute('class', 'qr-img');\n          // img.setAttribute(\"crossOrigin\", 'Anonymous')\n          document.getElementById(\"share-img\").src=img.src;\n          console.log('html2Image-finish')\n          // container.appendChild(img);\n            Indicator.close();\n          if (self.IS_APP) {\n            tjUploadFile(img).then(({\n              data\n            }) => {\n              self.imgUrl = self.makeFileUrl(data.result.url);\n            })\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  @import '../assets/style/main.less';\n  @import '../assets/style/share.less';\n</style>\n\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f51199da\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}