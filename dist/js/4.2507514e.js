(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0HhZ":function(a,s,e){a.exports=e.p+"img/default_share.f4b583de.png"},CW3l:function(a,s,e){"use strict";e.r(s);var t=function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("div",{staticClass:" moon-share",class:{"in-app":a.ENV.app}},[a.ENV.app?e("div",{staticClass:" share-app"},[a._m(0),e("div",{staticClass:"share-wrapper"},[e("moon-header",{attrs:{back:"",result:a.answerId}}),e("div",{staticClass:"share-wrap"},[e("div",{staticClass:"share-container"},[a.answerId?e("div",{staticClass:"share-score"},[e("div",{staticClass:"share-user-img"},[e("img",{staticClass:"share-user-avatar",attrs:{src:a.makeFileUrl(a.user.avatar),crossOrigin:"Anonymous"},on:{load:function(s){a.avatarLoad(!0,s)},error:function(s){a.avatarLoad(!1,s)}}})]),e("div",{staticClass:"share-user-name"},[a._v(a._s(a.user.fullname))]),e("div",{staticClass:"share-desc"},[a._v("\n                在【广寒攻略】中获得\n                "),e("span",{staticClass:"share-desc-score"},[a._v(" "+a._s(a.score))]),a._v(" 分，\n                "),e("span",{staticClass:"share-desc-tip"},[a._v(a._s(a.levelData.tip))]),a._v("\n                猜猜你是广寒宫里的谁？\n              ")]),e("div",{staticClass:"share-tag"},[e("img",{attrs:{src:a.levelData.tagImg}})]),e("div",{staticClass:"share-qrcode"},[e("qrcode-vue",{attrs:{value:a.qrcode.val,size:a.qrcode.size}})],1),e("div",{staticClass:"share-tip"},[a._v("长按识别二维码参与游戏，和他Pk吧！")])]):e("div",{staticClass:"share-default"},[e("div",{staticClass:"share-default-hd"}),e("div",{staticClass:"share-qrcode share-default-qrcode"},[e("qrcode-vue",{attrs:{value:a.qrcode.val,size:a.qrcode.size}})],1),e("div",{staticClass:"share-tip share-default-tip"},[a._v("长按识别二维码答题")]),e("div",{staticClass:"share-logo share-default-logo"})])]),e("div",{staticClass:"share-items box box-lr box-center-center"},[e("div",{staticClass:"item item1 box box-tb box-center-center",on:{click:function(s){a.toShare("inviteNewGuyActionWeChat",a.shareData)}}},[e("span",{staticClass:"weixin"}),e("span",[a._v("好友")])]),e("div",{staticClass:"item item2 box box-tb box-center-center",on:{click:function(s){a.toShare("inviteNewGuyActionWxTimeLine",a.shareData)}}},[e("span",{staticClass:"pyq"}),e("span",[a._v("朋友圈")])]),e("div",{staticClass:"item item3 box box-tb box-center-center",on:{click:function(s){a.toShare("inviteNewGuyActionSavePicture",a.shareData)}}},[e("span",{staticClass:"download"}),e("span",[a._v("保存至相册")])])])])],1)]):a._e(),e("div",{ref:"canvasContainer",staticClass:"main share-wx",class:{"share-wx-app":a.ENV.app}},[a._m(1),e("div",{staticClass:"share-wrapper"},[e("div",{staticClass:"share-container"},[a.answerId?e("div",{staticClass:"share-wx-score"},[e("div",{staticClass:"share-user-img"},[e("img",{staticClass:"share-user-avatar",attrs:{src:a.makeFileUrl(a.user.avatar),crossOrigin:"Anonymous"},on:{load:function(s){a.avatarLoad(!0,s)},error:function(s){a.avatarLoad(!1,s)}}})]),e("div",{staticClass:"share-user-name"},[a._v(a._s(a.user.fullname))]),e("div",{staticClass:"share-desc"},[a._v("\n              在【广寒攻略】中获得\n              "),e("span",{staticClass:"share-desc-score"},[a._v(" "+a._s(a.score))]),a._v(" 分，\n              "),e("span",{staticClass:"share-desc-tip"},[a._v(a._s(a.levelData.tip))]),a._v("\n              猜猜你是广寒宫里的谁？\n            ")]),e("div",{staticClass:"share-tag"},[e("img",{attrs:{src:a.levelData.tagImg}})]),e("div",{staticClass:"share-qrcode"},[e("qrcode-vue",{attrs:{value:a.qrcode.val,size:a.qrcode.size}})],1),e("div",{staticClass:"share-tip"},[a._v("长按识别二维码参与游戏，和他Pk吧！")])]):e("div",{staticClass:"share-wx-wrap"},[e("img",{staticClass:"share-wx-hd",attrs:{src:a.headImg}}),e("div",{staticClass:"share-qrcode share-wx-qrcode"},[e("qrcode-vue",{attrs:{value:a.qrcode.val,size:a.qrcode.size}})],1),e("div",{staticClass:"share-tip share-wx-tip"},[a._v("长按识别二维码答题")]),e("div",{staticClass:"share-logo share-wx-logo"})])])])]),e("img",{staticClass:"share-img",class:{"share-img-app":a.ENV.app},attrs:{src:"",id:"share-img"}})])},i=[function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("div",{staticClass:"yun-wrapper min"},[e("div",{staticClass:"yun"}),e("div",{staticClass:"yun1"})])},function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("div",{staticClass:"yun-wrapper min"},[e("div",{staticClass:"yun"}),e("div",{staticClass:"yun1"})])}],n=e("yT7P"),r=(e("VRzm"),e("dqDD")),o=e("L2JU"),c=e("Ea1W"),l=e("+n12"),d=e("8SHQ"),u=e("17CV"),h=e("0HhZ"),v=e.n(h),p={data:function(){return{isDrawed:!1,qrcode:{val:"https://a.tiejin.cn/moon",size:80},showData:[{tip:"赢得5元红包！",tagImg:e("qSsV")},{tip:"喜提盒饭价值2元。",tagImg:e("JxcV")},{tip:"和5元红包失之交臂。",tagImg:e("XRG+")}],defaultImg:v.a,imgUrl:"",headImg:e("W9La")}},components:{moonHeader:c["a"],QrcodeVue:u["a"]},created:function(){if(r["Indicator"].open(),sessionStorage.resultCache&&"{}"!=sessionStorage.resultCache){var a=JSON.parse(sessionStorage.resultCache);console.log("window.CACHE",a),this.setCache(a)}this.ENV.wx&&(console.log("share wxshare--"),this.initWxConfig()),this.qrcode.val=d["a"].href[this.ENV.env]+"/moon?activityId="+this.activityId+"&inviter="+this.objectID+"&salt="+this.salt},computed:Object(n["a"])({},Object(o["d"])("moon",{objectID:function(a){return a.user.objectID||""},salt:function(a){return a.statistic.signSalt},activityId:function(a){return a.activityId},user:function(a){return a.user},answerId:function(a){return a.endData.userAnswerId},shareData:function(a){return a.shareData},level:function(a){return a.endData.level},score:function(a){return a.endData.score}}),{levelData:function(){return this.showData[parseInt(this.level)-1]}}),mounted:function(){var a=this;console.log("answerId:",this.answerId),this.answerId?setTimeout(function(){a.isDrawed||a.drawHtmlToCanvas()},1e4):setTimeout(this.drawHtmlToCanvas,100)},methods:Object(n["a"])({},Object(o["b"])("moon",["wechatConfig","userShare","checkLoginInApp","initWxConfig"]),Object(o["c"])("moon",["setCache"]),{toShare:function(a){var s=this.imgUrl;if(window.ENV.app&&window.ENV.ios)setupWebViewJavascriptBridge(function(e){console.log("toShare ios bridge",e),e&&e.callHandler("inviteNewerAction",{type:a,img:s},function(a,s){})});else if(window.ENV.app&&window.ENV.android&&(console.log("toShare android bridge",bridge),"undefined"!=typeof window.bridge))try{window.bridge.inviteNewerAction(JSON.stringify({type:a,img:s}))}catch(a){Object(r["Toast"])("请升级最新版本客户端")}},makeFileUrl:function(a){var s=Object(l["e"])(a);return s},drawHtmlToCanvas:function(){var a=this,s=this,e=s.$refs.canvasContainer;s.isDrawed=!0,Object(l["d"])(e).then(function(e){console.log("html2Image-finish"),r["Indicator"].close(),s.ENV.app?Object(l["g"])(e).then(function(e){var t=e.data;a.imgUrl=s.makeFileUrl(t.result.url),document.getElementById("share-img").src=s.imgUrl}):document.getElementById("share-img").src=e.src})},avatarLoad:function(a,s){!a&&(s.target.style.display="none"),console.log("avatar.load:",a),this.isDrawed||setTimeout(this.drawHtmlToCanvas,100)}})},m=p,g=(e("TD29"),e("KHd+")),f=Object(g["a"])(m,t,i,!1,null,null,null);s["default"]=f.exports},Ea1W:function(a,s,e){"use strict";var t=function(){var a=this,s=a.$createElement,e=a._self._c||s;return a.ENV.v123?e("header",{staticClass:"header"},[e("div",{staticClass:"left"},[e("div",{staticClass:"common back",style:{display:a.back?"block":"none"},on:{click:function(s){a.handleBack()}}}),e("div",{staticClass:"common close",style:{display:a.close?"block":"none"},on:{click:function(s){a.handleClose()}}})]),e("div",{staticClass:"right"},[e("div",{staticClass:"share",style:{display:a.share?"block":"none"},on:{click:function(s){a.handleShare()}}})])]):a._e()},i=[],n=(e("L2JU"),{name:"tjHeader",data:function(){return{}},props:{back:Boolean,close:Boolean,share:Boolean,home:Boolean,result:Boolean},mounted:function(){console.log("header:",back,close,share,home,result)},methods:{handleBack:function(){this.result&&(sessionStorage.goResult=!0),this.$router.back()},handleClose:function(){if(this.ENV.app&&this.ENV.ios)setupWebViewJavascriptBridge(function(a){a&&a.callHandler("exitPage")});else if(this.ENV.app&&this.ENV.android&&"undefined"!=typeof window.bridge)try{window.bridge.exitPage()}catch(a){Toast("请升级最新版本客户端")}},handleShare:function(){this.$router.push({name:"moonShare"})}}}),r=n,o=(e("SdGr"),e("KHd+")),c=Object(o["a"])(r,t,i,!1,null,"d6a247be",null);s["a"]=c.exports},JxcV:function(a,s,e){a.exports=e.p+"img/local2.3362be3c.png"},SdGr:function(a,s,e){"use strict";var t=e("zZ+/"),i=e.n(t);i.a},TD29:function(a,s,e){"use strict";var t=e("gqez"),i=e.n(t);i.a},W9La:function(a,s,e){a.exports=e.p+"img/index_hd.7570c1e5.png"},"XRG+":function(a,s,e){a.exports=e.p+"img/local3.5470784a.png"},gqez:function(a,s,e){},qSsV:function(a,s,e){a.exports=e.p+"img/local1.decb6e20.png"},"zZ+/":function(a,s,e){}}]);
//# sourceMappingURL=4.2507514e.js.map