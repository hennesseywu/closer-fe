{"version":3,"sources":["webpack:///./src/pages/local/index/index.vue?aeda","webpack:///src/pages/local/index/index.vue","webpack:///./src/pages/local/index/index.vue?d49c","webpack:///./src/pages/local/index/index.vue","webpack:///./src/pages/local/index/index.vue?de8f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","in-app","IS_APP","on","click","$event","handleShare","showRankingList","_v","showRule","active","mounted","style","width","currentWidth","statistic","totalAwardAmt","showAmount","_s","currentTotalAmount","domProps","innerHTML","currentDesc","handleStart","chance","attrs","show","dialog","share","content","close","closeDialog","staticRenderFns","name","data","components","localDialog","computed","Object","objectSpread","vuex_esm","maxAwardAmt","remainTimesToMax","Math","ceil","utils","toFixed","concat","created","_this","self","SET_ACTIVITYID","activityId","checkLoginInApp","getStatistic","IS_WX","getUserInfoAndLoginWithWx","$route","query","then","sign","initWxConfig","methods","rate","count","arguments","length","undefined","parseInt","pow","checkOtherEnv","$router","push","console","log","_this2","setTimeout","local_indexvue_type_script_lang_js","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_2_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_2_3_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_73907338_lang_less_scoped_true__WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"0GAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,aAAAC,OAAgCC,SAAAR,EAAAS,UAAsBL,EAAA,OAAYE,YAAA,QAAAI,IAAwBC,MAAA,SAAAC,GAAyBZ,EAAAa,kBAAoBT,EAAA,WAAgBE,YAAA,QAAkBF,EAAA,OAAYE,YAAA,uBAAAI,IAAuCC,MAAA,SAAAC,GAAyBZ,EAAAc,sBAAwBd,EAAAe,GAAA,WAAAX,EAAA,OAA8BE,YAAA,wBAAAI,IAAwCC,MAAA,SAAAC,GAAyBZ,EAAAgB,eAAiBhB,EAAAe,GAAA,YAAAX,EAAA,WAAmCE,YAAA,kCAA4CF,EAAA,OAAYE,YAAA,kBAAAC,OAAqCU,OAAAjB,EAAAkB,WAAqBd,EAAA,OAAYE,YAAA,kBAAAC,OAAqCU,OAAAjB,EAAAkB,WAAqBd,EAAA,OAAYE,YAAA,kBAAAC,OAAqCU,OAAAjB,EAAAkB,WAAqBd,EAAA,OAAYE,YAAA,kBAAAC,OAAqCU,OAAAjB,EAAAkB,WAAqBd,EAAA,OAAYE,YAAA,aAAqBF,EAAA,WAAkBE,YAAA,KAAAC,OAAwBU,OAAAjB,EAAAkB,WAAqBd,EAAA,OAAYE,YAAA,gBAA0BF,EAAA,OAAYE,YAAA,cAAAa,OAAkCC,MAAApB,EAAAqB,kBAA0BjB,EAAA,OAAcE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,8BAAAC,OAAiDU,OAAAjB,EAAAsB,UAAAC,cAAAvB,EAAAwB,WAAA,MAAyDpB,EAAA,QAAaE,YAAA,2BAAqCF,EAAA,QAAaE,YAAA,oBAA8BN,EAAAe,GAAAf,EAAAyB,GAAAzB,EAAAwB,WAAA,WAAApB,EAAA,OAAqDE,YAAA,+BAAAC,OAAkDU,OAAAjB,EAAAsB,UAAAC,eAAAvB,EAAAwB,WAAA,OAA2DpB,EAAA,QAAaE,YAAA,6BAAuCF,EAAA,QAAaE,YAAA,oBAA8BN,EAAAe,GAAAf,EAAAyB,GAAAzB,EAAAwB,WAAA,YAAApB,EAAA,OAAsDE,YAAA,gCAAAC,OAAmDU,OAAAjB,EAAAsB,UAAAC,eAAAvB,EAAAwB,WAAA,MAA0DpB,EAAA,QAAaE,YAAA,4BAAsCF,EAAA,QAAaE,YAAA,oBAA8BN,EAAAe,GAAAf,EAAAyB,GAAAzB,EAAAwB,WAAA,aAAApB,EAAA,OAAuDE,YAAA,aAAuBN,EAAAe,GAAA,yBAAAX,EAAA,QAA6CE,YAAA,aAAuBN,EAAAe,GAAAf,EAAAyB,GAAAzB,EAAA0B,uBAAA1B,EAAAe,GAAA,cAAAX,EAAA,OAA0EE,YAAA,UAAAqB,UAAgCC,UAAA5B,EAAAyB,GAAAzB,EAAA6B,gBAAqCzB,EAAA,OAAYE,YAAA,yCAAAI,IAAyDC,MAAA,SAAAC,GAAyBZ,EAAA8B,kBAAoB1B,EAAA,OAAYE,YAAA,cAAwBN,EAAAe,GAAA,MAAAf,EAAAyB,GAAAzB,EAAAsB,UAAAS,QAAA,aAAA3B,EAAA,WAAuEE,YAAA,OAAiBF,EAAA,gBAAqB4B,OAAOC,KAAAjC,EAAAkC,OAAAD,KAAAE,MAAAnC,EAAAkC,OAAAC,MAAAC,QAAApC,EAAAkC,OAAAE,SAA6E1B,IAAK2B,MAAArC,EAAAsC,gBAAyB,IAC56EC,oECuDAC,KAAA,aACAC,KAFA,WAGA,OAEAvB,SAAA,EAEAgB,QAEAD,MAAA,EAEAE,OAAA,EAEAC,QAAA,oCAIAM,YACAC,YAAAT,EAAA,MAEAU,SAAAC,OAAAC,EAAA,KAAAD,IACAA,OAAAE,EAAA,KAAAF,CAAA,uBACAA,OAAAE,EAAA,KAAAF,EAAA,oBACAxB,aAHA,WAIA,WAAApB,KAAAqB,UAAAC,cAAAtB,KAAAqB,UAAA0B,YAAA,KAEAC,iBANA,WAOA,OAAAC,KAAAC,KAAAN,OAAAO,EAAA,KAAAP,CAAA5C,KAAAqB,UAAA0B,YAAA/C,KAAAqB,UAAAC,eAAA,IAEAG,mBATA,WAUA,OAAAzB,KAAAqB,UAAAC,cAAA,KAAA8B,QAAA,IAEAxB,YAZA,WAaA,UAAA5B,KAAAgD,iBACA,YAAAK,OAAAT,OAAAO,EAAA,KAAAP,CAAA5C,KAAAqB,UAAA0B,aAAA,WAEA,OAAAM,OAAArD,KAAAgD,iBAAA,gBAAAK,OAAAT,OAAAO,EAAA,KAAAP,CAAA5C,KAAAqB,UAAA0B,aAAA,eAGAO,QAvCA,WAuCA,IAAAC,EAAAvD,KACAwD,EAAAxD,KACAwD,EAAAC,eAAAb,OAAAO,EAAA,KAAAP,GAAAc,YACAF,EAAAhD,OAEAgD,EAAAG,gBAAAH,EAAAI,cACAJ,EAAAK,OAMAL,EAAAM,0BAAAN,EAAAO,OAAAC,OAAAC,KAAA,SAAAC,GACAA,GACAV,EAAAI,eACAJ,EAAAW,iBAEAZ,EAAAtB,OAAAC,OAAA,EACAqB,EAAAtB,OAAAE,QAAA,gBACAoB,EAAAtB,OAAAD,MAAA,MAMAoC,QAAAxB,OAAAC,EAAA,KAAAD,IACAA,OAAAE,EAAA,KAAAF,CAAA,SACA,kBACA,4BACA,eACA,iBAEAA,OAAAE,EAAA,KAAAF,CAAA,SACA,WACA,oBAGArB,WAZA,SAYA8C,GAAA,IAAAC,EAAAC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,KACA,OAAAG,SAAA1E,KAAAqB,UAAA0B,YAAAsB,EAAApB,KAAA0B,IAAA,GAAAL,KAGAzD,gBAhBA,WAiBAb,KAAA4E,iBACA5E,KAAA6E,QAAAC,MACAvC,KAAA,eAKAxB,SAxBA,WAyBAf,KAAA6E,QAAAC,MACAvC,KAAA,eAIAV,YA9BA,WAmCA7B,KAAA4E,iBACA5E,KAAA6E,QAAAC,MACAvC,KAAA,iBAIAF,YAzCA,WA0CArC,KAAAiC,OAAAD,MAAA,GAGA4C,cA7CA,WA+CA,OADAG,QAAAC,IAAAhF,KAAAqB,UAAAS,QACA9B,KAAAQ,QAAAR,KAAA6D,QAKA7D,KAAAqB,UAAAS,QAAA,KACA9B,KAAAiC,OAAAC,OAAA,EACAlC,KAAAiC,OAAAE,QAAA,iCACAnC,KAAAiC,OAAAD,MAAA,GACA,IARAhC,KAAAiC,OAAAC,OAAA,EACAlC,KAAAiC,OAAAE,QAAA,eACAnC,KAAAiC,OAAAD,MAAA,GACA,IAWApB,YA9DA,WA+DAZ,KAAA6E,QAAAC,MACAvC,KAAA,kBAIAtB,QApIA,WAoIA,IAAAgE,EAAAjF,KACAkF,WAAA,WACAD,EAAAhE,SAAA,GACA,OC9LgSkE,EAAA,0BCQhSC,EAAAxC,OAAAyC,EAAA,KAAAzC,CACAuC,EACArF,EACAwC,GACA,EACA,KACA,WACA,MAIAgD,EAAA,WAAAF,sECnB6eG,EAAA","file":"js/7.8f2a3c93.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main index\",class:{'in-app': _vm.IS_APP}},[_c('div',{staticClass:\"share\",on:{\"click\":function($event){_vm.handleShare()}}}),_c('section',{staticClass:\"tab\"},[_c('div',{staticClass:\"tab-default tab-left\",on:{\"click\":function($event){_vm.showRankingList()}}},[_vm._v(\"好友排行榜\")]),_c('div',{staticClass:\"tab-default tab-right\",on:{\"click\":function($event){_vm.showRule()}}},[_vm._v(\"活动规则\")])]),_c('section',{staticClass:\"hd animated bounceInDown fast\"},[_c('div',{staticClass:\"hd-default hd-1\",class:{active: _vm.mounted}}),_c('div',{staticClass:\"hd-default hd-2\",class:{active: _vm.mounted}}),_c('div',{staticClass:\"hd-default hd-3\",class:{active: _vm.mounted}}),_c('div',{staticClass:\"hd-default hd-4\",class:{active: _vm.mounted}}),_c('div',{staticClass:\"hd-img\"})]),_c('section',{staticClass:\"bd\",class:{active: _vm.mounted}},[_c('div',{staticClass:\"bd-progress\"},[_c('div',{staticClass:\"bd-complete\",style:({width: _vm.currentWidth})})]),_c('div',{staticClass:\"bd-scale\"},[_c('div',{staticClass:\"bd-scale-default bd-scale-0\",class:{active: _vm.statistic.totalAwardAmt > _vm.showAmount(0)}},[_c('span',{staticClass:\"bd-arrow bd-arrow-left\"}),_c('span',{staticClass:\"bd-scale-amount\"},[_vm._v(_vm._s(_vm.showAmount(0, 2)))])]),_c('div',{staticClass:\"bd-scale-default bd-scale-50\",class:{active: _vm.statistic.totalAwardAmt >= _vm.showAmount(.5)}},[_c('span',{staticClass:\"bd-arrow bd-arrow-center\"}),_c('span',{staticClass:\"bd-scale-amount\"},[_vm._v(_vm._s(_vm.showAmount(.5, 2)))])]),_c('div',{staticClass:\"bd-scale-default bd-scale-100\",class:{active: _vm.statistic.totalAwardAmt >= _vm.showAmount(1)}},[_c('span',{staticClass:\"bd-arrow bd-arrow-right\"}),_c('span',{staticClass:\"bd-scale-amount\"},[_vm._v(_vm._s(_vm.showAmount(1, 2)))])])]),_c('div',{staticClass:\"bd-total\"},[_vm._v(\"\\n      累计获得：\\n      \"),_c('span',{staticClass:\"bd-count\"},[_vm._v(_vm._s(_vm.currentTotalAmount))]),_vm._v(\" 元\\n    \")]),_c('div',{staticClass:\"bd-desc\",domProps:{\"innerHTML\":_vm._s(_vm.currentDesc)}}),_c('div',{staticClass:\"bd-btn animated pulse infinite delay-2\",on:{\"click\":function($event){_vm.handleStart()}}}),_c('div',{staticClass:\"bd-remain\"},[_vm._v(\"您还有\"+_vm._s(_vm.statistic.chance)+\"次答题机会\")])]),_c('section',{staticClass:\"ft\"}),_c('local-dialog',{attrs:{\"show\":_vm.dialog.show,\"share\":_vm.dialog.share,\"content\":_vm.dialog.content},on:{\"close\":_vm.closeDialog}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main index\" :class=\"{'in-app': IS_APP}\">\n    <div class=\"share\" @click=\"handleShare()\"></div>\n    <section class=\"tab\">\n      <div class=\"tab-default tab-left\" @click=\"showRankingList()\">好友排行榜</div>\n      <div class=\"tab-default tab-right\" @click=\"showRule()\">活动规则</div>\n    </section>\n    <section class=\"hd animated bounceInDown fast\">\n      <div class=\"hd-default hd-1\" :class=\"{active: mounted}\"></div>\n      <div class=\"hd-default hd-2\" :class=\"{active: mounted}\"></div>\n      <div class=\"hd-default hd-3\" :class=\"{active: mounted}\"></div>\n      <div class=\"hd-default hd-4\" :class=\"{active: mounted}\"></div>\n      <div class=\"hd-img\"></div>\n    </section>\n    <section class=\"bd\" :class=\"{active: mounted}\">\n      <div class=\"bd-progress\">\n        <div class=\"bd-complete\" :style=\"{width: currentWidth}\"></div>\n      </div>\n      <div class=\"bd-scale\">\n        <div class=\"bd-scale-default bd-scale-0\" :class=\"{active: statistic.totalAwardAmt > showAmount(0)}\">\n          <span class=\"bd-arrow bd-arrow-left\"></span>\n          <span class=\"bd-scale-amount\">{{showAmount(0, 2)}}</span>\n        </div>\n        <div class=\"bd-scale-default bd-scale-50\" :class=\"{active: statistic.totalAwardAmt >= showAmount(.5)}\">\n          <span class=\"bd-arrow bd-arrow-center\"></span>\n          <span class=\"bd-scale-amount\">{{showAmount(.5, 2)}}</span>\n        </div>\n        <div class=\"bd-scale-default bd-scale-100\" :class=\"{active: statistic.totalAwardAmt >= showAmount(1)}\">\n          <span class=\"bd-arrow bd-arrow-right\"></span>\n          <span class=\"bd-scale-amount\">{{showAmount(1, 2)}}</span>\n        </div>\n      </div>\n      <div class=\"bd-total\">\n        累计获得：\n        <span class=\"bd-count\">{{currentTotalAmount}}</span> 元\n      </div>\n      <div class=\"bd-desc\" v-html=\"currentDesc\"></div>\n      <div class=\"bd-btn animated pulse infinite delay-2\" @click=\"handleStart()\"></div>\n      <div class=\"bd-remain\">您还有{{statistic.chance}}次答题机会</div>\n    </section>\n    <section class=\"ft\"></section>\n    <local-dialog :show=\"dialog.show\" :share=\"dialog.share\" :content=\"dialog.content\" @close=\"closeDialog\"></local-dialog>\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue';\n  import localDialog from '../components/dialog';\n  import {\n    mapState,\n    mapActions,\n    mapMutations\n  } from 'vuex';\n  import {transAmount, parseQuery} from '../../../utils/utils'\n  \n  export default {\n    name: 'localIndex',\n    data() {\n      return {\n        // mounted\n        mounted: false,\n        // 弹窗\n        dialog: {\n          // 是否显示弹窗\n          show: false,\n          // 是否为分享弹窗\n          share: false,\n          // 弹窗文字内容\n          content: '呃~没有答题机会了，<br/>快去分享给好友获取答题机会吧！'\n        }\n      }\n    },\n    components: {\n      localDialog\n    },\n    computed: {\n      ...mapState('local', ['statistic']),\n      ...mapState(['IS_APP', 'IS_WX']),\n      currentWidth() {\n        return this.statistic.totalAwardAmt*100/this.statistic.maxAwardAmt + '%'\n      },\n      remainTimesToMax() {\n        return Math.ceil(transAmount(this.statistic.maxAwardAmt - this.statistic.totalAwardAmt) / 5)\n      },\n      currentTotalAmount() {\n        return (this.statistic.totalAwardAmt/100).toFixed(2);\n      },\n      currentDesc() {\n        if (this.remainTimesToMax == 0) {\n          return `恭喜，您已获得全部${transAmount(this.statistic.maxAwardAmt)}元的现金奖励~`\n        }\n        return `您再获得${this.remainTimesToMax}次王者称号就可以拿到总计${transAmount(this.statistic.maxAwardAmt)}元的现金奖励了！`\n      }\n    },\n    created() {\n      const self = this;\n      self.SET_ACTIVITYID(parseQuery().activityId);\n      if (self.IS_APP) { \n        // 端内\n        self.checkLoginInApp(self.getStatistic);\n      } else if (self.IS_WX) {\n        // 微信端\n        // let user = Cookies.get(\"user\");\n        // if (typeof(Cookies.get(\"token\")) != \"undefined\" && typeof(user) != \"undefined\") {\n        //   self.SET_USER(JSON.parse(user))\n        // } else {\n          self.getUserInfoAndLoginWithWx(self.$route.query).then(sign => {\n            if (sign) {\n              self.getStatistic();\n              self.initWxConfig();\n            } else {\n              this.dialog.share = false;\n              this.dialog.content = '亲，请先登录再参与答题吧~';\n              this.dialog.show = true;\n            }\n          })\n        // }\n      }\n    },\n    methods: {\n      ...mapActions('local', [\n        'checkLoginInApp',\n        'getUserInfoAndLoginWithWx',\n        'getStatistic',\n        'initWxConfig'\n      ]),\n      ...mapMutations('local', [\n        'SET_USER',\n        'SET_ACTIVITYID'\n      ]),\n      // 展示金额，rate为百分比率，count为除以10的指数\n      showAmount(rate, count = 0) {\n        return parseInt(this.statistic.maxAwardAmt*rate/(10**count))\n      },\n      // 转到排行榜\n      showRankingList() {\n        if (this.checkOtherEnv()) {\n          this.$router.push({\n            name: 'localRank'\n          })\n        }\n      },\n      // 转到规则\n      showRule() {\n        this.$router.push({\n          name: 'localRule'\n        })\n      },\n      // 开始答题\n      handleStart() {\n        // this.dialog.share = true;\n        //   this.dialog.content = '亲，没有答题积会了，<br/>快去分享给好友获取答题机会吧！';\n        //   this.dialog.show = true;\n        //   return false;\n        if (this.checkOtherEnv()) {\n          this.$router.push({\n            name: 'localAnswer'\n          })\n        }\n      },\n      closeDialog() {\n        this.dialog.show = false;\n      },\n      // 其他环境下弹窗提示去微信答题\n      checkOtherEnv() {\n        console.log(this.statistic.chance)\n        if (!this.IS_APP && !this.IS_WX) {\n          this.dialog.share = false;\n          this.dialog.content = '亲，请去微信环境下答题吧';\n          this.dialog.show = true;\n          return false;\n        } else if (this.statistic.chance <= 0) {\n          this.dialog.share = true;\n          this.dialog.content = '亲，没有答题机会了，<br/>快去分享给好友获取答题机会吧！';\n          this.dialog.show = true;\n          return false;\n        } else {\n          return true;\n        }\n      },\n      // 点击分享跳转到分享页\n      handleShare() {\n        this.$router.push({\n          name: 'localShare'\n        })\n      }\n    },\n    mounted() {\n      setTimeout(() => {\n        this.mounted = true;\n      }, 800);\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../assets/style/animation.less';\n  @import '../assets/style/main.less';\n  @import '../assets/style/index.less';\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=73907338&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=73907338&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73907338\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-oneOf-2-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-2-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-2-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=73907338&lang=less&scoped=true\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-oneOf-2-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-2-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-2-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=73907338&lang=less&scoped=true\""],"sourceRoot":""}