(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0HhZ":function(a,s,t){a.exports=t.p+"img/default_share.f4b583de.png"},"0JKd":function(a,s,t){"use strict";var e=t("6r68"),i=t.n(e);i.a},"6r68":function(a,s,t){},CW3l:function(a,s,t){"use strict";t.r(s);var e=function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"main moon-share"},[a.ENV.app?t("div",{staticClass:"main share-app"},[a._m(0),t("div",{staticClass:"share-wrapper"},[t("moon-header",{attrs:{back:"",home:""}}),t("div",{staticClass:"share-wrap"},[t("div",{staticClass:"share-container"},[a.answerId?t("div",{staticClass:"share-score"},[t("div",{staticClass:"share-user-img"},[t("img",{staticClass:"share-user-avatar",attrs:{src:a.makeFileUrl(a.user.avatar),crossOrigin:"Anonymous"},on:{load:function(s){a.avatarLoad(!0,s)},error:function(s){a.avatarLoad(!1,s)}}})]),t("div",{staticClass:"share-user-name"},[a._v(a._s(a.user.fullname))]),t("div",{staticClass:"share-desc"},[a._v("\n                在【广寒攻略】中获得\n                "),t("span",{staticClass:"share-desc-score"},[a._v(" "+a._s(a.score))]),a._v(" 分，\n                "),t("span",{staticClass:"share-desc-tip"},[a._v(a._s(a.levelData.tip))]),a._v("\n                猜猜你是广寒宫里的谁？\n              ")]),t("div",{staticClass:"share-tag"},[t("img",{attrs:{src:a.levelData.tagImg}})]),t("div",{staticClass:"share-qrcode"},[t("qrcode-vue",{attrs:{value:a.qrcode.val,size:a.qrcode.size}})],1),t("div",{staticClass:"share-tip"},[a._v("长按识别二维码参与游戏，和他Pk吧！")])]):t("div",{staticClass:"share-default"},[t("div",{staticClass:"share-default-hd"}),t("div",{staticClass:"share-qrcode share-default-qrcode"},[t("qrcode-vue",{attrs:{value:a.qrcode.val,size:a.qrcode.size}})],1),t("div",{staticClass:"share-tip share-default-tip"},[a._v("长按识别二维码答题")]),t("div",{staticClass:"share-logo share-default-logo"})])]),t("div",{staticClass:"share-items box box-lr box-center-center"},[t("div",{staticClass:"item item1 box box-tb box-center-center",on:{click:function(s){a.toShare("inviteNewGuyActionWeChat",a.shareData)}}},[t("span",{staticClass:"weixin"}),t("span",[a._v("好友")])]),t("div",{staticClass:"item item2 box box-tb box-center-center",on:{click:function(s){a.toShare("inviteNewGuyActionWxTimeLine",a.shareData)}}},[t("span",{staticClass:"pyq"}),t("span",[a._v("朋友圈")])]),t("div",{staticClass:"item item3 box box-tb box-center-center",on:{click:function(s){a.toShare("inviteNewGuyActionSavePicture",a.shareData)}}},[t("span",{staticClass:"download"}),t("span",[a._v("保存至相册")])])])])],1)]):a._e(),t("div",{ref:"canvasContainer",staticClass:"main share-wx",class:{"share-wx-app":a.ENV.app}},[a._m(1),t("div",{staticClass:"share-wrapper"},[t("div",{staticClass:"share-container"},[a.answerId?t("div",{staticClass:"share-wx-score"},[t("div",{staticClass:"share-user-img"},[t("img",{staticClass:"share-user-avatar",attrs:{src:a.makeFileUrl(a.user.avatar),crossOrigin:"Anonymous"},on:{load:function(s){a.avatarLoad(!0,s)},error:function(s){a.avatarLoad(!1,s)}}})]),t("div",{staticClass:"share-user-name"},[a._v(a._s(a.user.fullname))]),t("div",{staticClass:"share-desc"},[a._v("\n              在【广寒攻略】中获得\n              "),t("span",{staticClass:"share-desc-score"},[a._v(" "+a._s(a.score))]),a._v(" 分，\n              "),t("span",{staticClass:"share-desc-tip"},[a._v(a._s(a.levelData.tip))]),a._v("\n              猜猜你是广寒宫里的谁？\n            ")]),t("div",{staticClass:"share-tag"},[t("img",{attrs:{src:a.levelData.tagImg}})]),t("div",{staticClass:"share-qrcode"},[t("qrcode-vue",{attrs:{value:a.qrcode.val,size:a.qrcode.size}})],1),t("div",{staticClass:"share-tip"},[a._v("长按识别二维码参与游戏，和他Pk吧！")])]):t("div",{staticClass:"share-wx-wrap"},[t("img",{staticClass:"share-wx-hd",attrs:{src:a.headImg}}),t("div",{staticClass:"share-qrcode share-wx-qrcode"},[t("qrcode-vue",{attrs:{value:a.qrcode.val,size:a.qrcode.size}})],1),t("div",{staticClass:"share-tip share-wx-tip"},[a._v("长按识别二维码答题")]),t("div",{staticClass:"share-logo share-wx-logo"})])])])]),t("img",{staticClass:"share-img",class:{"share-img-app":a.ENV.app},attrs:{src:"",id:"share-img"}})])},i=[function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"yun-wrapper min"},[t("div",{staticClass:"yun"}),t("div",{staticClass:"yun1"})])},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"yun-wrapper min"},[t("div",{staticClass:"yun"}),t("div",{staticClass:"yun1"})])}],n=t("yT7P"),r=t("dqDD"),o=t("L2JU"),c=t("Ea1W"),l=t("+n12"),d=t("8SHQ"),h=t("17CV"),u=t("0HhZ"),v=t.n(u),p={data:function(){return{isDrawed:!1,qrcode:{val:"https://a.tiejin.cn/moon",size:80},showData:[{tip:"赢得5元红包！",tagImg:t("qSsV")},{tip:"喜提盒饭价值2元。",tagImg:t("JxcV")},{tip:"和5元红包失之交臂。",tagImg:t("XRG+")}],defaultImg:v.a,imgUrl:"",headImg:t("W9La")}},components:{moonHeader:c["a"],QrcodeVue:h["a"]},created:function(){if(r["Indicator"].open(),sessionStorage.resultCache&&"{}"!=sessionStorage.resultCache){var a=JSON.parse(sessionStorage.resultCache);console.log("window.CACHE",a),this.setCache(a)}this.ENV.wx&&(console.log("share wxshare--"),this.initWxConfig()),this.qrcode.val=d["a"].href[this.ENV.env]+"/moon?activityId="+this.activityId+"&inviter="+this.objectID+"&salt="+this.salt},computed:Object(n["a"])({},Object(o["d"])("moon",{objectID:function(a){return a.user.objectID||""},salt:function(a){return a.statistic.signSalt},activityId:function(a){return a.activityId},user:function(a){return a.user},answerId:function(a){return a.endData.userAnswerId},shareData:function(a){return a.shareData},level:function(a){return a.endData.level},score:function(a){return a.endData.score}}),{levelData:function(){return this.showData[parseInt(this.level)-1]}}),mounted:function(){var a=this;console.log("answerId:",this.answerId),this.answerId?setTimeout(function(){a.isDrawed||a.drawHtmlToCanvas()},1e4):setTimeout(this.drawHtmlToCanvas,100)},methods:Object(n["a"])({},Object(o["b"])("moon",["wechatConfig","userShare","checkLoginInApp","initWxConfig"]),Object(o["c"])("moon",["setCache"]),{toShare:function(a){var s=this.imgUrl;if(window.ENV.app&&window.ENV.ios)setupWebViewJavascriptBridge(function(t){console.log("toShare ios bridge",t),t&&t.callHandler("inviteNewerAction",{type:a,img:s},function(a,s){})});else if(window.ENV.app&&window.ENV.android&&(console.log("toShare android bridge",bridge),"undefined"!=typeof window.bridge))try{window.bridge.inviteNewerAction(JSON.stringify({type:a,img:s}))}catch(a){Object(r["Toast"])("请升级最新版本客户端")}},makeFileUrl:function(a){var s=Object(l["e"])(a);return s},drawHtmlToCanvas:function(){var a=this,s=a.$refs.canvasContainer;a.isDrawed=!0,Object(l["d"])(s).then(function(s){console.log("html2Image-finish"),r["Indicator"].close(),a.ENV.app?Object(l["g"])(s).then(function(s){s.data;document.getElementById("share-img").src=a.imgUrl}):document.getElementById("share-img").src=s.src})},avatarLoad:function(a,s){!a&&(s.target.style.display="none"),console.log("avatar.load:",a),this.isDrawed||setTimeout(this.drawHtmlToCanvas,100)}})},m=p,f=(t("0JKd"),t("KHd+")),g=Object(f["a"])(m,e,i,!1,null,"3b4c46e2",null);s["default"]=g.exports},Ea1W:function(a,s,t){"use strict";var e=function(){var a=this,s=a.$createElement,t=a._self._c||s;return a.ENV.v123?t("header",{staticClass:"header"},[t("div",{staticClass:"left"},[t("div",{staticClass:"common back",style:{display:a.back?"block":"none"},on:{click:function(s){a.handleBack()}}}),t("div",{staticClass:"common close",style:{display:a.close?"block":"none"},on:{click:function(s){a.handleClose()}}})]),t("div",{staticClass:"right"},[t("div",{staticClass:"share",style:{display:a.share?"block":"none"},on:{click:function(s){a.handleShare()}}})])]):a._e()},i=[],n=(t("L2JU"),{name:"tjHeader",data:function(){return{}},props:{back:Boolean,close:Boolean,share:Boolean,home:Boolean},mounted:function(){console.log("evn.v123---",this.ENV.v123)},methods:{handleBack:function(){this.home?this.$router.push({name:"moonIndex"}):this.$router.back()},handleClose:function(){if(this.ENV.app&&this.ENV.ios)setupWebViewJavascriptBridge(function(a){a&&a.callHandler("exitPage")});else if(this.ENV.app&&this.ENV.android&&"undefined"!=typeof window.bridge)try{window.bridge.exitPage()}catch(a){Toast("请升级最新版本客户端")}},handleShare:function(){this.$router.push({name:"moonShare"})}}}),r=n,o=(t("dHYW"),t("KHd+")),c=Object(o["a"])(r,e,i,!1,null,"57e44399",null);s["a"]=c.exports},JxcV:function(a,s,t){a.exports=t.p+"img/local2.3362be3c.png"},PtkR:function(a,s,t){},W9La:function(a,s,t){a.exports=t.p+"img/index_hd.7570c1e5.png"},"XRG+":function(a,s,t){a.exports=t.p+"img/local3.5470784a.png"},dHYW:function(a,s,t){"use strict";var e=t("PtkR"),i=t.n(e);i.a},qSsV:function(a,s,t){a.exports=t.p+"img/local1.decb6e20.png"}}]);
//# sourceMappingURL=4.58f407a9.js.map