(function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],l=0,d=[];l<s.length;l++)a=s[l],i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={17:0},i={17:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{0:"86a64656",1:"1a465955",2:"a81e0a79",3:"8a178bd4",4:"50a0bd83",5:"69fe899e",6:"ff983788",7:"d52c6e1e",8:"4a85c064",9:"d21e329c",10:"093e79c6",11:"e43050a9",12:"30b67646",13:"112cb1d7",14:"4d52fb1e",15:"4c4c5694"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+e+"."+{0:"31d6cfe0",1:"d686a8d1",2:"d40ce0f5",3:"770895c7",4:"39f9ec23",5:"f5259ba6",6:"ae5fb0b6",7:"bbfccd51",8:"f4b2ab3d",9:"abf1b36b",10:"d51012f3",11:"9a869613",12:"277e7dbf",13:"95e1c987",14:"8698d594",15:"c7002030"}[e]+".css",a=c.p+r,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var s=i[o],u=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(u===r||u===a))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){s=l[o],u=s.getAttribute("data-href");if(u===r||u===a)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.request=r,n(i)},d.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){a[e]=0}));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,n){r=i[e]=[t,n]});t.push(r[2]=o);var u=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e);var d=setTimeout(function(){p({type:"timeout",target:l})},12e4);function p(t){l.onerror=l.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}i[e]=void 0}}l.onerror=l.onload=p,u.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},c.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;o.push([4,16]),n()})({"+n12":function(e,t,n){"use strict";n.d(t,"c",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"h",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"d",function(){return g}),n.d(t,"g",function(){return b});n("ls82"),n("pIFo"),n("NO8f"),n("Oyvg"),n("OG14"),n("SRfc"),n("KKXr");var r=n("MECJ"),a=n("o75L"),i=n("lR8Q"),o=n.n(i),s=n("gjeX"),c=n.n(s);function u(){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("0"==Cookies.get("aid")){e.next=10;break}return t=new MobileDetect(navigator.userAgent),n=t.os(),r="","iOS"==n?(n="ios",r=t.versionStr("iPhone")):"AndroidOS"==n&&(n="android",r=t.versionStr("Android"),r=r.replace(/\./g,"_")),e.next=7,axios.post(a["a"].statitics.get_adcookie,{adid:Cookies.get("aid"),webUdid:!1,deviceType:n,deviceVersion:r});case 7:i=e.sent,o=i.data,o.result&&(s=o.result,s.udid&&Cookies.set("uid",s.udid,{expires:30}));case 10:location.href="http://tiejin.cn/down?downurl=closer://jump";case 11:case"end":return e.stop()}},e,this)})),l.apply(this,arguments)}function d(){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.call("hideOptionMenu")}):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",function(){WeixinJSBridge.call("hideOptionMenu")}),document.attachEvent("onWeixinJSBridgeReady",function(){WeixinJSBridge.call("hideOptionMenu")})):WeixinJSBridge.call("hideOptionMenu")}function p(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,a=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds();return r<10&&(r="0"+r),a<10&&(a="0"+a),n+"-"+r+"-"+a}function f(e,t,n){if(e){var r=n||500,i=a["a"].file[window.ENV.env];return"src"===t?-1!==e.indexOf("://")?e+"?s="+r:i+e+"?s="+r:-1!==e.indexOf("://")?e:i+e}}function h(e){return~~(e/100)}function m(e,t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push("".concat(r,"=").concat(t[r]));return e+(e.indexOf("?")>-1?"&":"?")+n.join("&")}function g(e){return new Promise(function(t,n){var r=e,a=r.offsetWidth,i=r.offsetHeight,s=document.createElement("canvas"),c=s.getContext("2d"),u=w(c);s.width=a*u,s.height=i*u,c.scale(u,u),c.mozImageSmoothingEnabled=!1,c.webkitImageSmoothingEnabled=!1,c.msImageSmoothingEnabled=!1,c.imageSmoothingEnabled=!1;var l={scale:u,canvas:s,logging:!1,width:a,height:i,backgroundColor:null,useCORS:!0};o()(r,l).then(function(e){console.log("html2canvas:finish:",e);var n=v(e,e.width,e.height,"image/jpeg");console.log("convertToImage:finish:"),t(n)})})}function v(e,t,n,r){try{r=o(r);var a=s(e,r,t,n);console.log(5);var i=c(a);return console.log(6),i}catch(e){throw console.log(7,e),new Error(e)}function o(e){e=e.toLowerCase().replace(/jpg/i,"jpeg");var t=e.match(/png|jpeg|bmp|gif/)[0];return"image/"+t}function s(e,t,n,r){e=u(e,n,r),console.log(3,e);var a=e.toDataURL(t);return console.log(4),a}function c(e){var t=document.createElement("img");return t.src=e,t}function u(e,t,n){var r=e.width,a=e.height;void 0==t&&(t=r),void 0==n&&(n=a);var i=document.createElement("canvas"),o=i.getContext("2d");return i.width=t,i.height=n,i.style.width=t,i.style.height=n,console.log(1,r,a,t,n),o.mozImageSmoothingEnabled=!1,o.webkitImageSmoothingEnabled=!1,o.msImageSmoothingEnabled=!1,o.imageSmoothingEnabled=!1,o.drawImage(e,0,0,r,a,0,0,t,n),console.log(2),i}}function w(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}function b(e){var t=document.forms[0],n=c()(Date.now()+"file"),r=s(e.src,n);console.log("upload");var i=new FormData(t);i.append("file",r);var o=a["a"].file[window.ENV.env];return axios.post(o+"/file/upload/public",i,{headers:{Accept:"application/json; charset=utf-8",Authorization:Cookies.get("GroukAuth")}});function s(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var t=atob(e.split(",")[1]),n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r));var a=new Blob([new Uint8Array(n)],{type:"image/png"});return a}}},"2pWm":function(e,t,n){"use strict";var r=n("7z2X"),a=n.n(r);a.a},4:function(e,t,n){n("201c"),e.exports=n("Vtdi")},"7z2X":function(e,t,n){},"8SHQ":function(e,t,n){"use strict";t["a"]={href:{build:"https://a.tiejin.cn",dev:"https://a-sandbox.tiejin.cn",sandbox:"https://a-sandbox.tiejin.cn",local:"http://local.tiejin.cn:8889"},file:{build:"https://file.tiejin.cn",dev:"https://file-sandbox.tiejin.cn",sandbox:"https://file-sandbox.tiejin.cn",local:"https://file-sandbox.tiejin.cn"},server:{build:"https://api.tiejin.cn/command/",dev:"https://api-sandbox.tiejin.cn/command/",sandbox:"https://api-sandbox.tiejin.cn/command/",local:"https://api-sandbox.tiejin.cn/command/"},download:{build:"http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer",dev:"http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer",sandbox:"http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer",local:"http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer"},wxAuthorization:{build:"https://h5.tiejin.cn/redirect?redirectUrl=",dev:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=",sandbox:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=",local:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl="}}},L3Ta:function(e,t,n){},QctN:function(e,t,n){"use strict";n("f3/d"),n("VRzm");var r=n("Kw5r"),a=n("jE9Z"),i=n("8SHQ"),o=n("dqDD"),s=function(){return n.e(15).then(n.bind(null,"CrtJ"))},c=function(){return n.e(14).then(n.bind(null,"BBkl"))},u=function(){return n.e(13).then(n.bind(null,"nsgK"))},l=function(){return n.e(12).then(n.bind(null,"MVSw"))},d=function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,"3mO2"))},p=function(){return n.e(10).then(n.bind(null,"po5H"))},f=function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.bind(null,"IC5M"))},h=function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,"y8bz"))},m=function(){return n.e(7).then(n.bind(null,"URgv"))},g=function(){return n.e(6).then(n.bind(null,"ZO67"))},v=function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"x6iy"))},w=function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"CW3l"))},b=function(){return n.e(3).then(n.bind(null,"VisK"))},_=function(){return n.e(2).then(n.bind(null,"lgAz"))};r["default"].use(a["a"]);var x=new a["a"]({mode:"history",routes:[{path:"/landing",name:"landing",component:s,meta:{title:"贴近Closer"}},{path:"/over",name:"activityOver",component:c,meta:{title:"贴近Closer"}},{path:"/pullnew",name:"pullNew",component:u,meta:{title:"邀好友，赚现金"}},{path:"/pullNew/rule",name:"pullNewRule",component:l,meta:{title:"邀好友，赚现金"}},{path:"/local",name:"localIndex",component:d,meta:{title:"谁是成都最土著"}},{path:"/local/answer",name:"localAnswer",component:p,meta:{title:"谁是成都最土著"}},{path:"/local/result",name:"localResult",component:f,meta:{title:"谁是成都最土著"}},{path:"/local/share",name:"localShare",component:h,meta:{title:"分享"}},{path:"/local/rule",name:"localRule",component:m,meta:{title:"活动规则"}},{path:"/local/rank",name:"localRank",component:g,meta:{title:"排行榜"}},{path:"/moonfestival",name:"festivalIndex",component:v,meta:{title:"首页"}},{path:"/moonfestival/rule",name:"festivalRule",component:b,meta:{title:"活动规则"}},{path:"/moonfestival/rank",name:"festivalRank",component:_,meta:{title:"活动规则"}},{path:"/moonfestival/share",name:"festivalShare",component:w,meta:{title:"分享"}}]});x.beforeEach(function(e,t,n){var r=e.meta,a=(e.path,e.fullPath),s=e.query,c=e.name;e.params;if(document.title=r.title?r.title:"贴近",console.log("router-before:",c,window.ENV.app,window.ENV.wx,s),"localIndex"==c||"festivalIndex"==c)if(window.ENV.app)console.log("closer device"),Cookies.remove("user"),n();else if(window.ENV.wx){if(s.code)return void n();console.log("fullpath:",a,s);var u=i["a"].href[window.ENV.env]+"?params="+encodeURIComponent(JSON.stringify(s)),l={path:u};console.log("from:",u),axios.post(api.admin.get_auth_path,l).then(function(e){var t=e.data;"undefined"!=typeof t.code&&0==t.code?location.href=t.result:n()}).catch(function(e){Object(o["Toast"])("网络开小差啦，请稍后再试")})}else n();else n()}),t["a"]=x},Vtdi:function(e,t,n){"use strict";n.r(t);n("VRzm");var r=n("Kw5r"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o={name:"App"},s=o,c=(n("2pWm"),n("KHd+")),u=Object(c["a"])(s,a,i,!1,null,"6b174f2a",null),l=u.exports,d=(n("201c"),n("ZCOS"),n("L3Ta"),n("dqDD")),p=n.n(d),f=(n("qjXo"),n("QctN")),h=n("L2JU"),m=(n("ls82"),n("MECJ")),g=n("o75L");n("jE9Z");function v(e){return w.apply(this,arguments)}function w(){return w=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].activity.get_invite_statistic,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),w.apply(this,arguments)}function b(e){return _.apply(this,arguments)}function _(){return _=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].activity.get_yesterday_award_amt,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),_.apply(this,arguments)}function x(e){return k.apply(this,arguments)}function k(){return k=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].activity.get_invitee_page_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),k.apply(this,arguments)}function y(e){return j.apply(this,arguments)}function j(){return j=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].activity.remind_login,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),j.apply(this,arguments)}var S={namespaced:!0,state:{pullNewStatic:{awardTotalAmt:0,invitedUsers:{1:{amount:1e3,isGrey:!0},2:{amount:200,isGrey:!0},3:{amount:200,isGrey:!0},4:{amount:200,isGrey:!0},5:{amount:200,isGrey:!0},6:{amount:200,isGrey:!0},7:{amount:1e3,isGrey:!0}}},awardAmt:0},mutations:{updatePullNewStatic:function(e,t){e.pullNewStatic=t},updateAwardAmt:function(e,t){e.awardAmt=t}},actions:{checkLogin:function(e,t){e.state,e.rootState;if(window.ENV.app&&window.ENV.ios)setTimeout(function(){setupWebViewJavascriptBridge(function(e){e&&e.callHandler("getUserToken",null,function(e,n){e?(Cookies.set("GroukAuth",e,{expires:30}),axios.post(g["a"].admin.user_show).then(function(e){var n=e.data;n.result?(Cookies.set("user",JSON.stringify(n.result),{expires:30}),t(!0)):(Cookies.remove("user"),Cookies.remove("GroukAuth"),t())}).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")})):(Cookies.remove("user"),Cookies.remove("GroukAuth"),setupWebViewJavascriptBridge(function(e){e.callHandler("jumpLogin",null)}),t())})})},500);else if(window.ENV.app&&window.ENV.android){if("undefined"!=typeof window.bridge){var n=window.bridge.getUserToken(null);n?(Cookies.set("GroukAuth",n,{expires:30}),axios.post(g["a"].admin.user_show).then(function(e){var n=e.data;n.result?(Cookies.set("user",JSON.stringify(n.result),{expires:30}),t(!0)):(Cookies.remove("user"),Cookies.remove("GroukAuth"),t())}).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")})):(Cookies.remove("user"),Cookies.remove("GroukAuth"),window.bridge.jumpLogin(null),t())}}else t()},getPullNewInfo:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s,c,u,l,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,v(n).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 3:if(a=e.sent,i=a.data,"undefined"!=typeof i.code&&0==i.code&&"undefined"!=typeof i.result.inviteUserTotalCount){if(o={},s=i.result.inviteUserTotalCount,c=i.result.invitedUsers,s<4)for(u=0;u<7;u++)c[u]?o[u+1]=c[u]:(l=200,(u+1)%7!=0&&0!=u||(l=1e3),o[u+1]={amount:l,isGrey:!0});else for(u=0;u<7;u++)c[u]?o[s-3+u]=c[u]:(p=200,(s-3+u)%7==0&&(p=1e3),o[s-3+u]={amount:p,isGrey:!0});i.result.invitedUsers=o,r("updatePullNewStatic",i.result)}case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getYesterdayAwardAmt:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,b(n).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 3:a=e.sent,i=a.data,"undefined"!=typeof i.code&&0==i.code&&r("updateAwardAmt",i.result);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getInviteUserList:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.next=3,x(n).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 3:if(r=e.sent,a=r.data,"undefined"==typeof a.code||0!=a.code){e.next=7;break}return e.abrupt("return",a.result);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),remindLogin:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,e.next=3,y(n).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 3:if(a=e.sent,i=a.data,"undefined"==typeof i.code||0!=i.code){e.next=9;break}return Object(d["Toast"])("提醒成功喽~"),r("getPullNewInfo"),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}},R=n("a94B"),O={wechatConfig:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("service--",t),e.next=3,axios.post(g["a"].admin.wechat_config,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getUserInfoInApp:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].admin.user_show);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkWxCode:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].admin.check_wechat,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),loginWithWx:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].admin.login_with_wechat,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getStatistic:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].activity.tuzhu.get_question_statistic,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getRankList:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].activity.tuzhu.get_rank_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),startTest:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,axios.post(g["a"].activity.tuzhu.start_test,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),endTest:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("endTest",t),e.next=3,axios.post(g["a"].activity.tuzhu.end_test,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),userShare:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(1,t),e.next=3,axios.post(g["a"].activity.tuzhu.share_user_answer,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),userDefaultShare:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(1,t),e.next=3,axios.post(g["a"].activity.tuzhu.get_default_share,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},T=n("+n12"),I=(n("Po9p"),{namespaced:!0,state:{aid:"TuZhuActivity-2",isLogin:!1,activityId:2,inviter:"",signSalt:"",user:{},statistic:{maxAwardAmt:1e4,totalAwardAmt:0,chance:0,rank:0,signSalt:""},rank:{selfRank:{user:{}},rankList:[]},startResult:{},startData:[],currentQuesitionNum:0,endData:{},shareData:"",wxConfig:null},mutations:{SET_USER:function(e,t){e.user=t,e.isLogin=!0},SET_STATISTIC:function(e,t){e.statistic=t},SET_RANKLIST:function(e,t){e.rank=t},startData:function(e,t){var n=t.data.result;e.startResult=n,e.startData=n.questions},setEndData:function(e,t){e.endData=t.result,t.result.totalAwardAmt&&(e.statistic.totalAwardAmt=t.result.totalAwardAmt)},shareData:function(e,t){var n=t.data.result;e.shareData=n.shareUrl||n.defaultShareUrl},SET_PARAMS:function(e,t){var n=t.inviter,r=t.activityId,a=t.salt;r&&(e.activityId=r),n&&(e.inviter=n),a&&(e.signSalt=a)},updateChance:function(e){var t=e.statistic.chance;e.statistic.chance=--t},updateCurrentQuestionNum:function(e){e.currentQuesitionNum=0,e.startResult={},e.startData=[],console.log(123,e.currentQuesitionNum)},nextQuestion:function(e){var t=e.currentQuesitionNum;e.currentQuesitionNum=++t},setWxConfig:function(e,t){e.wxConfig=t},setCache:function(e,t){e.statistic=t.statistic,e.endData=t.endData,e.shareData=t.shareData,e.user=t.user,e.objectID=t.objectID,e.currentQuesitionNum=t.currentQuesitionNum}},actions:{updateChance:function(e){var t=e.commit;t("updateChance")},updateCurrentQuestionNum:function(e){var t=e.commit;t("updateCurrentQuestionNum")},userShare:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s,c,u,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.commit,!sessionStorage.userAnswerId){e.next=10;break}return i={userAnswerId:sessionStorage.userAnswerId},e.next=5,O.userShare(i).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 5:o=e.sent,s=o.data,void 0!=Object(R["a"])(s.code)&&0==s.code?a({type:"shareData",data:s}):s.result&&Object(d["Toast"])(s.result),e.next=17;break;case 10:return c={activityId:r.activityId},console.log("default share--",c),e.next=14,O.userDefaultShare(c).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 14:u=e.sent,l=u.data,void 0!=Object(R["a"])(l.code)&&0==l.code?a({type:"shareData",data:l}):l.result&&Object(d["Toast"])(l.result);case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),checkParams:function(e,t){var n=e.commit,r=t.params,a=t.activityId,i=t.inviter,o=t.salt;try{r=JSON.parse(decodeURIComponent(r))}catch(e){r={}}a=r.activityId||a||"",i=r.inviter||i||"",o=r.salt||o||"",console.log("params:",a,i),n("SET_PARAMS",{activityId:a,inviter:i,salt:o})},checkLoginInApp:function(e,t){e.state;var n=e.commit;e.rootState;if(window.ENV.app&&window.ENV.ios)console.log("module closer-ios"),setTimeout(function(){setupWebViewJavascriptBridge(function(e){console.log("ios bridge",e),e&&e.callHandler("getUserToken",null,function(e,r){console.log("ios token",e),e?(Cookies.set("GroukAuth",e,{expires:30}),O.getUserInfoInApp().then(function(e){var r=e.data;if(console.log("ios",r.result),r.result){var a=r.result;Cookies.set("user",a,{expires:30}),n("SET_USER",a),t(!0)}else t()}).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")})):(console.log("ios jumpLogin"),setupWebViewJavascriptBridge(function(e){e.callHandler("jumpLogin",null)}),t())})})},500);else if(window.ENV.app&&window.ENV.android){if(console.log("closer-android"),console.log("module android","undefined"!=typeof window.bridge),"undefined"!=typeof window.bridge){var r=window.bridge.getUserToken(null);console.log("android",r),r?(Cookies.set("GroukAuth",r,{expires:30}),O.getUserInfoInApp().then(function(e){var r=e.data;if(console.log("android",r.result),r.result){var a=r.result;Cookies.set("user",a,{expires:30}),n("SET_USER",a),t(!0)}else t()}).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")})):(console.log("android jumpLogin"),window.bridge.jumpLogin(null),t())}}else t()},getUserInfoAndLoginWithWx:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s,c,u,l,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.commit,i=n.code,o=n.inviter,o=r.inviter||o,s=Cookies.get("user"),c=Cookies.get("GroukAuth"),!s||!c){e.next=11;break}return console.log("user-from-cookie:",JSON.parse(s)),a("SET_USER",JSON.parse(s)),e.abrupt("return",!0);case 11:return u={plateform:2,code:i,inviter:o,adid:r.aid,protocol:"WEB_SOCKET"},e.next=14,O.loginWithWx(u);case 14:if(l=e.sent,d=l.data,0!=d.code){e.next=26;break}return s=d.result.user,c=d.result.token,console.log("user-from-server:",s),a("SET_USER",s),Cookies.set("GroukAuth",c,{expires:7}),Cookies.set("user",s,{expires:7}),e.abrupt("return",!0);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getStatistic:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.next=3,O.getStatistic({activityId:r.activityId});case 3:a=e.sent,i=a.data,0==i.code?n("SET_STATISTIC",i.result):Object(d["Toast"])("网络开小差啦，请稍后再试");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getRankList:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.next=3,O.getRankList({activityId:r.activityId,inviteUser:r.inviter});case 3:a=e.sent,i=a.data,0==i.code?n("SET_RANKLIST",i.result):Object(d["Toast"])("网络开小差啦，请稍后再试");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),startTest:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=t.state,i={activityId:a.activityId},e.next=4,O.startTest(i).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 4:if(o=e.sent,s=o.data,void 0==Object(R["a"])(s.code)||0!=s.code){e.next=10;break}r({type:"startData",data:s}),e.next=12;break;case 10:return Object(d["Toast"])("网络开小差啦，请稍后再试"),e.abrupt("return");case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),nextQuestion:function(e,t){var n=e.state,r=e.commit;r("nextQuestion"),n.currentQuesitionNum,n.startData.length},commitTest:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,a=t.commit,e.next=3,O.endTest(n).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 3:i=e.sent,o=i.data,console.log(3,o),Object(R["a"])(void 0!=o.code)&&0==o.code?(a("setEndData",o),window.sessionStorage.userAnswerId=r.endData.userAnswerId):o.result&&Object(d["Toast"])(o.result);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),initWxConfig:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,t.rootState,r=t.commit,a=n.wxConfig,a&&a.signature&&a.appId&&a.nonceStr&&a.timestamp){e.next=14;break}return i={url:location.href},e.next=6,O.wechatConfig(i).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 6:if(o=e.sent,s=o.data,"undefined"==typeof s.code||0!=s.code){e.next=13;break}r("setWxConfig",s.result),a=s.result,e.next=14;break;case 13:return e.abrupt("return");case 14:c=Object(T["a"])(location.origin+"/local",{inviter:n.user.objectID,activityId:n.activityId,salt:n.statistic.signSalt}),sessionStorage.setItem("link",c),console.log("wxShare:link:",c),a&&a.signature&&a.appId&&a.nonceStr&&a.timestamp&&(wx.config({debug:!1,signature:a.signature,appId:a.appId,nonceStr:a.nonceStr,timestamp:a.timestamp,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),wx.ready(function(){console.log("ready"),wx.onMenuShareAppMessage({title:"是成都人就来瓜分百万大奖",desc:"参与成都人纯度测试，纯度越高，奖金越多！",link:c,imgUrl:"http://file.tiejin.cn/public/9Ykg0XgzgX/share_img.png",type:"",dataUrl:"",success:function(){Object(d["Toast"])("分享成功~")}}),wx.onMenuShareTimeline({title:"是成都人就来瓜分百万大奖",link:c,imgUrl:"http://file.tiejin.cn/public/9Ykg0XgzgX/share_img.png",success:function(){Object(d["Toast"])("分享成功~")}})}),wx.error(function(e){console.error("wx.config.error",e)}));case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}}),A={wechatConfig:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("service--",t),e.next=3,axios.post(g["a"].admin.wechat_config,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getUserInfoInApp:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].admin.user_show);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkWxCode:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].admin.check_wechat,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),loginWithWx:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].admin.login_with_wechat,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getStatistic:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].activity.tuzhu.get_question_statistic,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getRankList:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(g["a"].activity.tuzhu.get_rank_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),startTest:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,axios.post(g["a"].activity.tuzhu.start_test,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),endTest:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("endTest",t),e.next=3,axios.post(g["a"].activity.tuzhu.end_test,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),userShare:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(1,t),e.next=3,axios.post(g["a"].activity.tuzhu.share_user_answer,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),userDefaultShare:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(1,t),e.next=3,axios.post(g["a"].activity.tuzhu.get_default_share,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},C={namespaced:!0,state:{aid:"TuZhuActivity-2",isLogin:!1,activityId:2,inviter:"",signSalt:"",user:{},statistic:{maxAwardAmt:1e4,totalAwardAmt:0,chance:0,rank:0,signSalt:""},rank:{selfRank:{user:{}},rankList:[]},startResult:{},startData:[],currentQuesitionNum:0,endData:{},shareData:"",wxConfig:null},mutations:{SET_USER:function(e,t){e.user=t,e.isLogin=!0},SET_STATISTIC:function(e,t){e.statistic=t},SET_RANKLIST:function(e,t){e.rank=t},startData:function(e,t){var n=t.data.result;e.startResult=n,e.startData=n.questions},setEndData:function(e,t){e.endData=t.result,t.result.totalAwardAmt&&(e.statistic.totalAwardAmt=t.result.totalAwardAmt)},shareData:function(e,t){var n=t.data.result;e.shareData=n.shareUrl||n.defaultShareUrl},SET_PARAMS:function(e,t){var n=t.inviter,r=t.activityId,a=t.salt;r&&(e.activityId=r),n&&(e.inviter=n),a&&(e.signSalt=a)},updateChance:function(e){var t=e.statistic.chance;e.statistic.chance=--t},updateCurrentQuestionNum:function(e){e.currentQuesitionNum=0,e.startResult={},e.startData=[],console.log(123,e.currentQuesitionNum)},nextQuestion:function(e){var t=e.currentQuesitionNum;e.currentQuesitionNum=++t},setWxConfig:function(e,t){e.wxConfig=t},setCache:function(e,t){e.statistic=t.statistic,e.endData=t.endData,e.shareData=t.shareData,e.user=t.user,e.objectID=t.objectID,e.currentQuesitionNum=t.currentQuesitionNum}},actions:{updateChance:function(e){var t=e.commit;t("updateChance")},updateCurrentQuestionNum:function(e){var t=e.commit;t("updateCurrentQuestionNum")},userShare:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s,c,u,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.commit,!sessionStorage.userAnswerId){e.next=10;break}return i={userAnswerId:sessionStorage.userAnswerId},e.next=5,A.userShare(i).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 5:o=e.sent,s=o.data,void 0!=Object(R["a"])(s.code)&&0==s.code?a({type:"shareData",data:s}):s.result&&Object(d["Toast"])(s.result),e.next=17;break;case 10:return c={activityId:r.activityId},console.log("default share--",c),e.next=14,A.userDefaultShare(c).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 14:u=e.sent,l=u.data,void 0!=Object(R["a"])(l.code)&&0==l.code?a({type:"shareData",data:l}):l.result&&Object(d["Toast"])(l.result);case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),checkParams:function(e,t){var n=e.commit,r=t.params,a=t.activityId,i=t.inviter,o=t.salt;try{r=JSON.parse(decodeURIComponent(r))}catch(e){r={}}a=r.activityId||a||"",i=r.inviter||i||"",o=r.salt||o||"",console.log("params:",a,i),n("SET_PARAMS",{activityId:a,inviter:i,salt:o})},checkLoginInApp:function(e,t){e.state;var n=e.commit;e.rootState;if(window.ENV.app&&window.ENV.ios)console.log("module closer-ios"),setTimeout(function(){setupWebViewJavascriptBridge(function(e){console.log("ios bridge",e),e&&e.callHandler("getUserToken",null,function(e,r){console.log("ios token",e),e?(Cookies.set("GroukAuth",e,{expires:30}),A.getUserInfoInApp().then(function(e){var r=e.data;if(console.log("ios",r.result),r.result){var a=r.result;Cookies.set("user",a,{expires:30}),n("SET_USER",a),t(!0)}else t()}).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")})):(console.log("ios jumpLogin"),setupWebViewJavascriptBridge(function(e){e.callHandler("jumpLogin",null)}),t())})})},500);else if(window.ENV.app&&window.ENV.android){if(console.log("closer-android"),console.log("module android","undefined"!=typeof window.bridge),"undefined"!=typeof window.bridge){var r=window.bridge.getUserToken(null);console.log("android",r),r?(Cookies.set("GroukAuth",r,{expires:30}),A.getUserInfoInApp().then(function(e){var r=e.data;if(console.log("android",r.result),r.result){var a=r.result;Cookies.set("user",a,{expires:30}),n("SET_USER",a),t(!0)}else t()}).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")})):(console.log("android jumpLogin"),window.bridge.jumpLogin(null),t())}}else t()},getUserInfoAndLoginWithWx:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s,c,u,l,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.commit,i=n.code,o=n.inviter,o=r.inviter||o,s=Cookies.get("user"),c=Cookies.get("GroukAuth"),!s||!c){e.next=11;break}return console.log("user-from-cookie:",JSON.parse(s)),a("SET_USER",JSON.parse(s)),e.abrupt("return",!0);case 11:return u={plateform:2,code:i,inviter:o,adid:r.aid,protocol:"WEB_SOCKET"},e.next=14,A.loginWithWx(u);case 14:if(l=e.sent,d=l.data,0!=d.code){e.next=26;break}return s=d.result.user,c=d.result.token,console.log("user-from-server:",s),a("SET_USER",s),Cookies.set("GroukAuth",c,{expires:7}),Cookies.set("user",s,{expires:7}),e.abrupt("return",!0);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getStatistic:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.next=3,A.getStatistic({activityId:r.activityId});case 3:a=e.sent,i=a.data,0==i.code?n("SET_STATISTIC",i.result):Object(d["Toast"])("网络开小差啦，请稍后再试");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getRankList:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.next=3,A.getRankList({activityId:r.activityId,inviteUser:r.inviter});case 3:a=e.sent,i=a.data,0==i.code?n("SET_RANKLIST",i.result):Object(d["Toast"])("网络开小差啦，请稍后再试");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),startTest:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=t.state,i={activityId:a.activityId},e.next=4,A.startTest(i).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 4:if(o=e.sent,s=o.data,void 0==Object(R["a"])(s.code)||0!=s.code){e.next=10;break}r({type:"startData",data:s}),e.next=12;break;case 10:return Object(d["Toast"])("网络开小差啦，请稍后再试"),e.abrupt("return");case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),nextQuestion:function(e,t){var n=e.state,r=e.commit;r("nextQuestion"),n.currentQuesitionNum,n.startData.length},commitTest:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,a=t.commit,e.next=3,A.endTest(n).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 3:i=e.sent,o=i.data,console.log(3,o),Object(R["a"])(void 0!=o.code)&&0==o.code?(a("setEndData",o),window.sessionStorage.userAnswerId=r.endData.userAnswerId):o.result&&Object(d["Toast"])(o.result);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),initWxConfig:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.state,t.rootState,r=t.commit,a=n.wxConfig,a&&a.signature&&a.appId&&a.nonceStr&&a.timestamp){e.next=14;break}return i={url:location.href},e.next=6,A.wechatConfig(i).catch(function(e){Object(d["Toast"])("网络开小差啦，请稍后再试")});case 6:if(o=e.sent,s=o.data,"undefined"==typeof s.code||0!=s.code){e.next=13;break}r("setWxConfig",s.result),a=s.result,e.next=14;break;case 13:return e.abrupt("return");case 14:c=Object(T["a"])(location.origin+"/local",{inviter:n.user.objectID,activityId:n.activityId,salt:n.statistic.signSalt}),sessionStorage.setItem("link",c),console.log("wxShare:link:",c),a&&a.signature&&a.appId&&a.nonceStr&&a.timestamp&&(wx.config({debug:!1,signature:a.signature,appId:a.appId,nonceStr:a.nonceStr,timestamp:a.timestamp,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),wx.ready(function(){console.log("ready"),wx.onMenuShareAppMessage({title:"是成都人就来瓜分百万大奖",desc:"参与成都人纯度测试，纯度越高，奖金越多！",link:c,imgUrl:"http://file.tiejin.cn/public/9Ykg0XgzgX/share_img.png",type:"",dataUrl:"",success:function(){Object(d["Toast"])("分享成功~")}}),wx.onMenuShareTimeline({title:"是成都人就来瓜分百万大奖",link:c,imgUrl:"http://file.tiejin.cn/public/9Ykg0XgzgX/share_img.png",success:function(){Object(d["Toast"])("分享成功~")}})}),wx.error(function(e){console.error("wx.config.error",e)}));case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}};r["default"].use(h["a"]);var E=new h["a"].Store({state:{UA:"",IS_APP:!1,IS_WX:!1,IS_NEW_USER:!1,IS_DEV:!1,V_1_2_3:!1},modules:{pullNew:S,local:I,moonFestival:C}}),N=n("vDqi"),D=n.n(N),U=n("8SHQ"),V=void 0,L=D.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).BASE_API,timeout:15e3,withCredentials:!0});L.interceptors.request.use(function(e){var t=U["a"].server[window.ENV.env]+e.url;return e.url=t,window.ENV.app?V.ENV.app&&V.ENV.ios?e.headers["Closer-Agent"]="Closer-Ios":V.ENV.app&&V.ENV.android&&(e.headers["Closer-Agent"]="Closer-Android"):e.headers["Closer-Agent"]="Closer-H5",Cookies.get("uid")&&(e.headers["X-Udid"]=Cookies.get("uid")),Cookies.get("aid")&&(e.headers["X-Adid"]=Cookies.get("aid")),(Cookies.get("GroukAuth")&&-1==e.url.indexOf("auth")&&-1==e.url.indexOf("account")||Cookies.get("GroukAuth")&&-1!=e.url.indexOf("closer_account.bind_phone"))&&(e.headers.Authorization=Cookies.get("GroukAuth")),e.data&&"undefined"!=typeof e.data.noIndicator||d["Indicator"].open(),e},function(e){return d["Indicator"].close(),Promise.reject(e).catch(e)}),L.interceptors.response.use(function(e){return d["Indicator"].close(),e},function(e){var t=n("B/eG").default;if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录",router.push({name:"worldcupIndex"});break;case 403:e.message="拒绝访问",router.push({name:"worldcupIndex"});break;case 404:e.message="请求地址出错: ".concat(e.response.config.url);break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:}else e.message="网络错误，请稍后再试！";return e&&e.response&&e.response.data&&e.response.data.message?console.warn(e.response.data.message):console.warn(e.message),d["Indicator"].close(),t.reject(e).catch(e)});var W=L,B=n("p46w"),P=n.n(B),z=n("OjQg"),J=n.n(z),Q=n("xsZ3"),M=n.n(Q),G=n("GKBh"),q=n.n(G),X=(n("KKXr"),n("SRfc"),navigator.userAgent.toLowerCase()||navigator.userAgent.toLowerCase()),K=location.href,H=window.ENV={},Z=U["a"].href;function Y(){for(var e in Z){var t=K.indexOf(Z[e]);t>-1&&t<=11&&(H.env=e)}H.env||console.error("ENV.env不可为空，请确保当前测试页面的location.origin是~/src/config/index.js配置的href值之一!"),H.ua=X,H.app=/closer-(android|ios)/.test(X),H.wx=/micromessenger/.test(X),H.ios=/((iphone\sos)\s([\d_]+))|(-ios)/.test(X),H.android=/((android);?[\s\/]+([\d.]+)?)|(-android)/.test(X),H.version=X.match(/closerapp\/version\/([0-9.]+)/)||"0",H.weibo=/weibo/.test(X),H.qq=/qq/.test(X),H.safari=/version\/([\d.]+)([^S](safari)|[^M]*(mobile)[^S]*(safari))/.test(X),H.chrome=/chrome\/([\d.]+)/.test(X)||/crios\/([\d.]+)/.test(X),H.firefox=/firefox\/([\d.]+)/.test(X),H.ie=/msie\s([\d.]+)/.test(X)||/trident\/[\d](?=[^\?]+).*rv:([0-9.].)/.test(X),H.dev="build"!=H.env;var n=X.match(/closerapp\/version\/([0-9.]+)/);return H.version=n?n[1]:"",H.v123=F("1.2.3","1.2.2"),console.log("当前环境变量window.ENV:",H),H}function F(e,t){var n=window.ENV.version,r=!t||window.ENV.android?e:t;if(n&&r){n=n[1],n=n.split("."),r=r.split(".");for(var a=Math.max(n.length,r.length),i=0;i<a;i++){var o=parseInt(n[i]||0),s=parseInt(r[i]||0);if(o>s)return!0}}return!1}var $=Y();if($.dev)new J.a;function ee(){var e=Math.min(screen.width,document.documentElement.getBoundingClientRect().width)/375*16;document.documentElement.style.fontSize=(e>=32?32:e)+"px"}r["default"].prototype.ENV=$,window.wx=q.a,window.axios=W,window.Cookies=P.a,window.MobileDetect=M.a,window.setupWebViewJavascriptBridge=function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)},r["default"].config.productionTip=!1,r["default"].use(p.a),ee(),window.onresize=ee,new r["default"]({store:E,router:f["a"],render:function(e){return e(l)}}).$mount("#app")},ZCOS:function(e,t,n){},o75L:function(e,t,n){"use strict";var r,a=n("oyJW");t["a"]={admin:{get_auth_path:"closer_auth.get_auth_path",login_with_wechat:"closer_auth.login_with_wechat",closeruser_regist:"closer_auth.closeruser_regist",get_code_by_phone:"closer_account.get_code_by_phone_v2",check:"closer_account.check",check_wechat:"closer_account.check_wechat",info:"closer_user.info",user_show:"closer_user.show",bind_phone:"closer_account.bind_phone",like:"closer_reply.like",add_reply:"closer_reply.add_reply",invite_counts:"closer_user.invite_counts",wechat_config:"closer_share.wechat_config"},command:{show:"closer_subject.show",incr_view:"closer_subject.incr_view",comments:"closer_reply.comments",videos:"ali_vod.accessInfo",report:"closer_report.add",like:"closer_reply.like",add_reply:"closer_reply.add_reply",replys:"closer_reply.replys",reportType:"closer_report.get_report_types"},community:{show:"closer_community.show",community_subject_list_index:"closer_subject.community_subject_list_index",subscription:"closer_community.subscription"},group:{show:"closer_class.show",recruiting:"closer_class.recruiting",group_subject_list:"closer_subject.class_subject_list_index",share_group:"closer_share.outer_group"},activity:(r={get_activity:"closer_activity.get_activity",add_channel:"activity_worldcup.add_channel",check_guess_result:"activity_worldcup.check_guess_result",get_match_list:"activity_worldcup.get_match_list",get_user_guess_list:"activity_worldcup.get_user_guess_list",get_user_guess_statistic:"activity_worldcup.get_user_guess_statistic",guess_match:"activity_worldcup.guess_match",receive_chance:"activity_worldcup.receive_chance"},Object(a["a"])(r,"check_guess_result","activity_worldcup.check_guess_result"),Object(a["a"])(r,"activity_water_chance","activity_water.chance"),Object(a["a"])(r,"activity_water_update","activity_water.update"),Object(a["a"])(r,"activity_water_join","activity_water.join"),Object(a["a"])(r,"get_invite_statistic","closer_invite.get_statistic"),Object(a["a"])(r,"get_invitee_page_list","closer_invite.get_invitee_page_list"),Object(a["a"])(r,"get_yesterday_award_amt","closer_invite.get_yesterday_award_amt"),Object(a["a"])(r,"remind_login","closer_invite.remind_login"),Object(a["a"])(r,"tuzhu",{get_question_statistic:"activity_tuzhu.get_question_statistic",end_test:"activity_tuzhu.end_test",get_rank_list:"activity_tuzhu.get_rank_list",share_user_answer:"activity_tuzhu.share_user_answer",start_test:"activity_tuzhu.start_test",get_default_share:"activity_tuzhu.get_default_share_url"}),r),statitics:{view_count:"closer_promotion_activity.view_count",get_adcookie:"closer_statistics.get_adcookie"},share:{wechat_config:"closer_share.wechat_config",get_adcookie:"closer_statistics.get_adcookie",common:"closer_statistics.user_action_v2"}}}});
//# sourceMappingURL=main.50d27199.js.map