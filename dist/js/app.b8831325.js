(function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],l=0,p=[];l<s.length;l++)a=s[l],i[a]&&p.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={17:0},i={17:0},o=[];function s(e){return u.p+"js/"+({}[e]||e)+"."+{0:"8af60c88",1:"adb89e10",2:"432fe3da",3:"5432f3d6",4:"7e2cc734",5:"707fb91e",6:"843e5dc7",7:"2cb87409",8:"27332ae4",9:"b38fc571",10:"e5ced39b",11:"4bfa8d56",12:"6cf06f1c",13:"859e0814",14:"2ab4ed1d",15:"13f93c58"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+e+"."+{0:"e9c8539f",1:"2bf560fb",2:"03a41913",3:"d91990df",4:"d9c38421",5:"edd99abe",6:"150ef01e",7:"af5583d7",8:"60a0aee8",9:"68062685",10:"74cb8c2c",11:"5981ba1c",12:"d79061fd",13:"cbbbad0a",14:"e43ba8ee",15:"c59374c8"}[e]+".css",a=u.p+r,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var s=i[o],c=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(c===r||c===a))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){s=l[o],c=s.getAttribute("data-href");if(c===r||c===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.request=r,n(i)},p.href=a;var d=document.getElementsByTagName("head")[0];d.appendChild(p)}).then(function(){a[e]=0}));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,n){r=i[e]=[t,n]});t.push(r[2]=o);var c=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=s(e);var p=setTimeout(function(){d({type:"timeout",target:l})},12e4);function d(t){l.onerror=l.onload=null,clearTimeout(p);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}i[e]=void 0}}l.onerror=l.onload=d,c.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},u.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var d=l;o.push([5,16]),n()})({"+n12":function(e,t,n){"use strict";n.d(t,"j",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"k",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"i",function(){return l}),n.d(t,"c",function(){return p}),n.d(t,"h",function(){return d}),n.d(t,"l",function(){return f}),n.d(t,"a",function(){return h}),n.d(t,"b",function(){return m});n("Oyvg"),n("OG14"),n("SRfc"),n("KKXr"),n("VRzm");var r=n("fBUP");function a(e){location.href=e?"closer://community/9j9m4gy8sM":"https://h5.tiejin.cn/community/9j9m4gy8sM"}function i(){location.href="http://tiejin.cn/down?downurl=closer://jump"}function o(e){var t=e/100;return t.toFixed(2)}function s(){var e=window.location.href.split("-");if(!e)return null;var t=e.length;return e[t-1]}function u(){var e=navigator.userAgent.toLowerCase();return/closer-(android|ios)/.test(e)}function c(){var e=navigator.userAgent.toLowerCase();return/micromessenger/.test(e)}function l(){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.call("hideOptionMenu")}):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",function(){WeixinJSBridge.call("hideOptionMenu")}),document.attachEvent("onWeixinJSBridgeReady",function(){WeixinJSBridge.call("hideOptionMenu")})):WeixinJSBridge.call("hideOptionMenu")}function p(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,a=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds();return r<10&&(r="0"+r),a<10&&(a="0"+a),n+"-"+r+"-"+a}function d(e,t,n){if(e){var a=n||500,i=Cookies.get("IS_DEV")?r["a"].fileDevURL:r["a"].fileUrl;return"src"===t?-1!==e.indexOf("://")?e+"?s="+a:i+e+"?s="+a:-1!==e.indexOf("://")?e:i+e}}function f(e){return~~(e/100)}function h(e,t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push("".concat(r,"=").concat(t[r]));return e+(e.indexOf("?")>-1?"&":"?")+n.join("&")}function m(e,t,n){var r=e.indexOf("android")>-1?t:n;try{var a=r.split("."),i=(e.split("closerapp/version/")[1]||"").split(".");return console.log(i),i[0]>=a[0]&&i[1]>=a[1]&&i[2]>=a[2]}catch(e){return!1}}},5:function(e,t,n){e.exports=n("Vtdi")},"68vw":function(e,t,n){},CriB:function(e,t,n){},D2H8:function(e,t,n){"use strict";var r=n("68vw"),a=n.n(r);a.a},L3Ta:function(e,t,n){},QctN:function(e,t,n){"use strict";n("f3/d");var r=n("Kw5r"),a=n("jE9Z"),i=n("fBUP"),o=n("dqDD"),s=n("+n12"),u=(n("wNa6"),function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,"FbUH"))}),c=function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,"7ODX"))},l=function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,"5pOR"))},p=function(){return n.e(12).then(n.bind(null,"CrtJ"))},d=function(){return n.e(11).then(n.bind(null,"jMpL"))},f=function(){return n.e(10).then(n.bind(null,"BBkl"))},h=function(){return n.e(9).then(n.bind(null,"nsgK"))},m=function(){return n.e(8).then(n.bind(null,"MVSw"))},g=function(){return Promise.all([n.e(1),n.e(7)]).then(n.bind(null,"3mO2"))},w=function(){return n.e(6).then(n.bind(null,"po5H"))},v=function(){return Promise.all([n.e(1),n.e(5)]).then(n.bind(null,"IC5M"))},b=function(){return n.e(4).then(n.bind(null,"y8bz"))},x=function(){return n.e(3).then(n.bind(null,"URgv"))},_=function(){return n.e(2).then(n.bind(null,"ZO67"))};r["default"].use(a["a"]);var y=new a["a"]({mode:"history",routes:[{path:"/worldcup/activity",name:"worldcupActivity",component:c,meta:{title:"贴近世界杯 瓜分600万"}},{path:"/worldcup/:channelCode",name:"worldcupIndex",component:u,meta:{title:"领取机会"}},{path:"/worldcup/share/",name:"worldcupShare",component:l,meta:{title:"贴近世界杯 瓜分600万"}},{path:"/landing",name:"landing",component:p,meta:{title:"贴近Closer"}},{path:"/teabar/:channelCode",name:"tblogin",component:d,meta:{title:"贴近Closer"}},{path:"/over",name:"activityOver",component:f,meta:{title:"贴近Closer"}},{path:"/pullnew",name:"pullNew",component:h,meta:{title:"邀好友，赚现金"}},{path:"/pullNew/rule",name:"pullNewRule",component:m,meta:{title:"邀好友，赚现金"}},{path:"/local",name:"localIndex",component:g,meta:{title:"谁是成都最土著"}},{path:"/local/answer",name:"localAnswer",component:w,meta:{title:"谁是成都最土著"}},{path:"/local/result",name:"localResult",component:v,meta:{title:"谁是成都最土著"}},{path:"/local/share",name:"localShare",component:b,meta:{title:"分享"}},{path:"/local/rule",name:"localRule",component:x,meta:{title:"活动规则"}},{path:"/local/rank",name:"localRank",component:_,meta:{title:"排行榜"}}]});y.beforeEach(function(e,t,n){var r=e.meta,a=e.path,u=e.fullPath,c=e.query,l=e.name,p=e.params;if(document.title=r.title?r.title:"贴近","worldcupIndex"==l){var d=function(){if(Cookies.set("aid","0",{expires:30}),p.channelCode&&"0"!=p.channelCode&&Cookies.set("aid",p.channelCode,{expires:30}),ua.indexOf("closer-android")>-1){if("undefined"!=typeof window.bridge){var e=window.bridge.getUserToken(null);e?(Cookies.set("GroukAuth",e,{expires:30}),y.push({name:"worldcupActivity"})):window.bridge.jumpLogin(null)}n()}else ua.indexOf("closer-ios")>-1?(setupWebViewJavascriptBridge(function(e){e&&e.callHandler("getUserToken",null,function(e,t){console.log("ios token",e),e?(Cookies.set("GroukAuth",e,{expires:30}),y.push({name:"worldcupActivity"})):setupWebViewJavascriptBridge(function(e){e.callHandler("jumpLogin",null)})})}),n()):Cookies.get("GroukAuth")?(p&&p.channelCode&&Cookies.set("aid",p.channelCode,{expires:30}),y.push({name:"worldcupActivity"}),n()):n()};axios.post(i["a"].activity.get_activity).then(function(e){var t=e.data;"undefined"!=typeof t.code&&0==t.code?t.result.enabled&&y.push({name:"activityOver"}):d()}).catch(function(e){d()})}else if("tblogin"==l||"localIndex"==l)if(Object(s["f"])())console.log("closer device"),Cookies.remove("user"),n();else if(Object(s["g"])()){if(c.code)return void n();console.log("fullpath:",u,c);var f=(Cookies.get("IS_DEV")?i["a"].wxLoginDevUrl:i["a"].wxLoginUrl)+a+"?params="+encodeURIComponent(JSON.stringify(c)),h={path:f};console.log("from:",f),axios.post(i["a"].admin.get_auth_path,h).then(function(e){var t=e.data;"undefined"!=typeof t.code&&0==t.code?location.href=t.result:n()}).catch(function(e){Object(o["Toast"])("网络开小差啦，请稍后再试")})}else n();else"worldcupActivity"!=l||Cookies.get("GroukAuth")?n():y.push({name:"worldcupIndex",params:{channelCode:0}})}),t["a"]=y},Vtdi:function(e,t,n){"use strict";n.r(t);n("VRzm");var r=n("Kw5r"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o={name:"App"},s=o,u=(n("D2H8"),n("KHd+")),c=Object(u["a"])(s,a,i,!1,null,"1d76026a",null),l=c.exports,p=(n("ZCOS"),n("CriB"),n("L3Ta"),n("dqDD")),d=n.n(p),f=(n("qjXo"),n("QctN")),h=n("wNa6"),m=n("vDqi"),g=n.n(m),w=n("fBUP"),v=g.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).BASE_API,timeout:15e3,withCredentials:!0});v.interceptors.request.use(function(e){var t=w["a"].serverDevUrl+e.url;return/a-sandbox.tiejin/.test(window.location.href)?t=w["a"].serverDevUrl+e.url:/a.tiejin/.test(window.location.href)&&(t=w["a"].serverUrl+e.url),e.url=t,h["a"].state.IS_APP?h["a"].state.UA.indexOf("closer-ios")>-1?e.headers["Closer-Agent"]="Closer-Ios":h["a"].state.UA.indexOf("closer-android")>-1&&(e.headers["Closer-Agent"]="Closer-Android"):e.headers["Closer-Agent"]="Closer-H5",Cookies.get("uid")&&(e.headers["X-Udid"]=Cookies.get("uid")),Cookies.get("aid")&&(e.headers["X-Adid"]=Cookies.get("aid")),(Cookies.get("GroukAuth")&&-1==e.url.indexOf("auth")&&-1==e.url.indexOf("account")||Cookies.get("GroukAuth")&&-1!=e.url.indexOf("closer_account.bind_phone"))&&(e.headers.Authorization=Cookies.get("GroukAuth")),e.data&&"undefined"!=typeof e.data.noIndicator||p["Indicator"].open(),e},function(e){return p["Indicator"].close(),Promise.reject(e).catch(e)}),v.interceptors.response.use(function(e){return p["Indicator"].close(),e},function(e){var t=n("B/eG").default;if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录",router.push({name:"worldcupIndex"});break;case 403:e.message="拒绝访问",router.push({name:"worldcupIndex"});break;case 404:e.message="请求地址出错: ".concat(e.response.config.url);break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:}else e.message="网络错误，请稍后再试！";return e&&e.response&&e.response.data&&e.response.data.message?console.warn(e.response.data.message):console.warn(e.message),p["Indicator"].close(),t.reject(e).catch(e)});var b=v,x=n("p46w"),_=n.n(x),y=n("OjQg"),k=n.n(y),j=n("xsZ3"),O=n.n(j),R=n("GKBh"),T=n.n(R),C=n("+n12");if(/sandbox.tiejin/.test(window.location.href)||/127.0.0.1/.test(window.location.href)||/local.tiejin.cn/.test(window.location.href)){new k.a;h["a"].state.IS_DEV=!0,_.a.set("IS_DEV",!0,{expires:1})}function S(){var e=Math.min(screen.width,document.documentElement.getBoundingClientRect().width)/375*16;document.documentElement.style.fontSize=(e>=32?32:e)+"px"}function A(){var e=(navigator.userAgent||window.navigator.userAgent).toLowerCase();h["a"].state.V_1_2_3=Object(C["b"])(e,"1.2.3","1.2.2"),h["a"].state.UA=e,h["a"].state.IS_APP=Object(C["f"])(),h["a"].state.IS_WX=Object(C["g"])()}window.wx=T.a,window.axios=b,window.Cookies=_.a,window.MobileDetect=O.a,window.setupWebViewJavascriptBridge=function(e){if(window.WebViewJavascriptBridge)return e(WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)},r["default"].config.productionTip=!1,r["default"].use(d.a),A(),S(),window.onresize=S,new r["default"]({store:h["a"],router:f["a"],render:function(e){return e(l)}}).$mount("#app")},ZCOS:function(e,t,n){},fBUP:function(e,t,n){"use strict";var r,a=n("oyJW");t["a"]={fileUrl:"https://file.tiejin.cn",fileDevURL:"https://file-sandbox.tiejin.cn",serverUrl:"https://api.tiejin.cn/command/",devserverUrl:"http://10.3.0.11:8080/command/",subdevserverUrl:"http://oms-sandbox.tiejin.cn/command",serverDevUrl:"https://api-sandbox.tiejin.cn/command/",downUrl:"http://a.app.qq.com/o/simple.jsp?pkgname=com.ums.closer",wxLoginLocalUrl:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=http://local.tiejin.cn:8889",wxLoginDevUrl:"https://h5-sandbox.tiejin.cn/redirect?redirectUrl=https://a-sandbox.tiejin.cn",wxLoginUrl:"https://h5.tiejin.cn/redirect?redirectUrl=https://a.tiejin.cn",file:"/file/upload/public",admin:{get_auth_path:"closer_auth.get_auth_path",login_with_wechat:"closer_auth.login_with_wechat",closeruser_regist:"closer_auth.closeruser_regist",get_code_by_phone:"closer_account.get_code_by_phone_v2",check:"closer_account.check",check_wechat:"closer_account.check_wechat",info:"closer_user.info",user_show:"closer_user.show",bind_phone:"closer_account.bind_phone",like:"closer_reply.like",add_reply:"closer_reply.add_reply",invite_counts:"closer_user.invite_counts",wechat_config:"closer_share.wechat_config"},command:{show:"closer_subject.show",incr_view:"closer_subject.incr_view",comments:"closer_reply.comments",videos:"ali_vod.accessInfo",report:"closer_report.add",like:"closer_reply.like",add_reply:"closer_reply.add_reply",replys:"closer_reply.replys",reportType:"closer_report.get_report_types"},community:{show:"closer_community.show",community_subject_list_index:"closer_subject.community_subject_list_index",subscription:"closer_community.subscription"},group:{show:"closer_class.show",recruiting:"closer_class.recruiting",group_subject_list:"closer_subject.class_subject_list_index",share_group:"closer_share.outer_group"},activity:(r={get_activity:"closer_activity.get_activity",add_channel:"activity_worldcup.add_channel",check_guess_result:"activity_worldcup.check_guess_result",get_match_list:"activity_worldcup.get_match_list",get_user_guess_list:"activity_worldcup.get_user_guess_list",get_user_guess_statistic:"activity_worldcup.get_user_guess_statistic",guess_match:"activity_worldcup.guess_match",receive_chance:"activity_worldcup.receive_chance"},Object(a["a"])(r,"check_guess_result","activity_worldcup.check_guess_result"),Object(a["a"])(r,"activity_water_chance","activity_water.chance"),Object(a["a"])(r,"activity_water_update","activity_water.update"),Object(a["a"])(r,"activity_water_join","activity_water.join"),Object(a["a"])(r,"get_invite_statistic","closer_invite.get_statistic"),Object(a["a"])(r,"get_invitee_page_list","closer_invite.get_invitee_page_list"),Object(a["a"])(r,"get_yesterday_award_amt","closer_invite.get_yesterday_award_amt"),Object(a["a"])(r,"remind_login","closer_invite.remind_login"),Object(a["a"])(r,"tuzhu",{get_question_statistic:"activity_tuzhu.get_question_statistic",end_test:"activity_tuzhu.end_test",get_rank_list:"activity_tuzhu.get_rank_list",share_user_answer:"activity_tuzhu.share_user_answer",start_test:"activity_tuzhu.start_test",get_default_share:"activity_tuzhu.get_default_share_url"}),r),statitics:{view_count:"closer_promotion_activity.view_count",get_adcookie:"closer_statistics.get_adcookie"}}},wNa6:function(e,t,n){"use strict";n("VRzm");var r=n("Kw5r"),a=n("L2JU"),i=(n("ls82"),n("MECJ")),o=n("fBUP"),s=n("dqDD");function u(e){return c.apply(this,arguments)}function c(){return c=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.get_code_by_phone,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),c.apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return p=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.closeruser_regist,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),p.apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return f=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.user_show,{uid:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),f.apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return m=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].statitics.view_count,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),m.apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return w=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].statitics.get_adcookie,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),w.apply(this,arguments)}var v=n("QctN"),b={namespaced:!0,state:{loginSuccess:!1,chanceBoxShow:!0,loginBoxShow:!1,isApp:!1,sendCode:"发送验证码",countDown:60,deviceType:"",deviceVersion:"",adid:"",timestampNow:0},mutations:{updateCountDown:function(e){e.countDown=59;var t=setInterval(function(){e.countDown--,e.sendCode=e.countDown+" s",0==e.countDown&&(clearInterval(t),e.countDown=60,e.sendCode="再次发送")},1e3)},viewCount:function(e,t){e.id=t.id},updateTimestamp:function(e,t){e.timestampNow=Date.now()}},actions:{updateTimestamp:function(e){var t=e.commit;t("updateTimestamp")},viewCount:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.state,r=t.commit,e.next=3,h(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:a=e.sent,i=a.data,a.cookies,r({type:"viewCount",data:i});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getAdCookies:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.rootState,n.adid&&"0"==n.adid&&delete n["adid"],e.next=4,g(n).catch(function(e){});case 4:return r=e.sent,a=r.data,a.result&&(i=a.result,i.udid&&Cookies.set("uid",i.udid,{expires:30})),e.abrupt("return",null);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),checkLogin:function(e){e.state;var t=e.rootState;if(t.IS_APP){var n=t.UA;n.indexOf("closer-ios")>-1&&setupWebViewJavascriptBridge(function(e){e&&e.callHandler("getUserToken",null,function(e,t){e?(Cookies.set("GroukAuth",e,{expires:7}),v["a"].push({name:"worldcupActivity"})):setupWebViewJavascriptBridge(function(e){e.callHandler("jumpLogin",null)})})})}},openLoginBox:function(e){var t=e.state,n=e.rootState;if(n.IS_APP){var r=n.UA;if(r.indexOf("closer-android")>-1){if("undefined"!=typeof window.bridge){var a=window.bridge.getUserToken(null);a?(Cookies.set("GroukAuth",a,{expires:7}),v["a"].push({name:"worldcupActivity"})):window.bridge.jumpLogin(null)}}else r.indexOf("closer-ios")>-1&&window.WebViewJavascriptBridge&&setupWebViewJavascriptBridge(function(e){e&&e.callHandler("getUserToken",null,function(e,t){e?(Cookies.set("GroukAuth",e,{expires:7}),v["a"].push({name:"worldcupActivity"})):setupWebViewJavascriptBridge(function(e){e.callHandler("jumpLogin",null)})})})}else t.loginBoxShow=!0,t.chanceBoxShow=!1},getUserById:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.state,e.next=3,d(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getCode:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a=t.state,t.rootState,/^(0|86|17951)?(1[23456789][0-9])[0-9]{8}$/.test(n.phone)){e.next=4;break}return Object(s["Toast"])("请输入正确的手机号"),e.abrupt("return");case 4:if(0!=n.grouk_captcha_value.length){e.next=8;break}return Object(s["Toast"])("请输入验证码"),e.abrupt("return");case 8:if(60!=a.countDown){e.next=16;break}return e.next=12,u(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 12:i=e.sent,o=i.data,c=i.status,c&&200==c?"undefined"!=typeof o.code&&(0==o.code?(r("updateCountDown"),Object(s["Toast"])("验证码发送成功")):(3003!=o.code&&r("updateTimestamp"),o.result&&Object(s["Toast"])(o.result))):Object(s["Toast"])("网络开小差啦，请稍后再试");case 16:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),login:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.commit,t.state,t.rootState,!n.phone||/^(0|86|17951)?(1[23456789][0-9])[0-9]{8}$/.test(n.phone)){e.next=4;break}return Object(s["Toast"])("请输入正确的手机号"),e.abrupt("return");case 4:if(0!=n.imgCode.length){e.next=8;break}return Object(s["Toast"])("请输入图形验证码"),e.abrupt("return");case 8:if(0!=n.token.length){e.next=11;break}return Object(s["Toast"])("请输入验证码"),e.abrupt("return");case 11:return Cookies.get("uid")&&(n["udid"]=Cookies.get("uid")),Cookies.get("aid")&&(n["adid"]=Cookies.get("aid")),n["protocol"]="WEB_SOCKET",e.next=16,l(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 16:if(r=e.sent,a=r.data,"undefined"==typeof a.code){e.next=31;break}if(!a.result||!a.result.token){e.next=28;break}if(Cookies.set("GroukAuth",a.result.token,{expires:60}),!a.result.user){e.next=25;break}if(Cookies.set("user",JSON.stringify(a.result.user),{expires:60}),!n.push){e.next=25;break}return e.abrupt("return",a.result.user);case 25:v["a"].push({name:"worldcupActivity"}),e.next=29;break;case 28:a.result&&Object(s["Toast"])(a.result);case 29:e.next=33;break;case 31:return Object(s["Toast"])("网络开小差啦，请稍后再试"),e.abrupt("return");case 33:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}};function x(e){return _.apply(this,arguments)}function _(){return _=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.get_user_guess_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),_.apply(this,arguments)}function y(e){return k.apply(this,arguments)}function k(){return k=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.get_match_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),k.apply(this,arguments)}function j(e){return O.apply(this,arguments)}function O(){return O=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.get_user_guess_statistic,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),O.apply(this,arguments)}function R(e){return T.apply(this,arguments)}function T(){return T=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.guess_match,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),T.apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return S=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.check_guess_result,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),S.apply(this,arguments)}function A(e){return U.apply(this,arguments)}function U(){return U=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.receive_chance,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),U.apply(this,arguments)}var I={namespaced:!0,state:{matchList:"",userGuessList:[],userGuessStatistic:{},recieveChanceInfo:{},userGuessResult:{},voteInfo:{logo:"",teamName:"",matchId:"",winTeamId:"",mathResult:"",gustTeamLogo:!1}},mutations:{updateMatchlist:function(e,t){e.matchList=t.data.result.data;for(var n=0,r=e.matchList.length;n<r;n++)"group"!=e.matchList[n].matchType?e.grayBtn=!0:e.grayBtn=!1},updateUserGuesslist:function(e,t){e.userGuessList=t.data.result.data},updateUserGuessStatistic:function(e,t){e.userGuessStatistic=t.data.result},updateRecieveChance:function(e,t){e.recieveChanceInfo=t.result},updateUserGuessResult:function(e,t){e.userGuessResult=t.result}},actions:{checkRecieveChance:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,u,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,a=t.commit,i={},"0"!=Cookies.get("aid")&&(i["channelCode"]=Cookies.get("aid"),i["type"]="other"),e.next=5,A(i).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 5:if(o=e.sent,u=o.data,"undefined"==typeof u.code){e.next=19;break}if(0!=u.code){e.next=16;break}if(c=u.result,a({type:"updateRecieveChance",result:c}),!(c.count&&c.count>0)){e.next=14;break}return e.next=14,r("getUserGuessStatistic");case 14:e.next=17;break;case 16:Cookies.set("aid","illegalAid",{expires:30});case 17:e.next=20;break;case 19:Object(s["Toast"])("网络开小差啦，请稍后再试");case 20:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getMatchList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,e.next=3,y(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:if(a=e.sent,i=a.data,!i.code||0==i.code){e.next=8;break}return Object(s["Toast"])(i.result),e.abrupt("return");case 8:r({type:"updateMatchlist",data:i});case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getUserGuessList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,e.next=3,x(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:a=e.sent,i=a.data,r({type:"updateUserGuesslist",data:i});case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),guessMatch:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,t.commit,t.state,e.next=3,R(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:if(a=e.sent,i=a.data,!i||0!=i.code){e.next=15;break}return Object(s["Toast"])("竞猜成功"),e.next=9,r("getUserGuessStatistic");case 9:return e.next=11,r("getMatchList");case 11:return e.next=13,r("getUserGuessList");case 13:e.next=16;break;case 15:Object(s["Toast"])(i.result);case 16:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),setVoteInfo:function(e,t){var n=e.state;n.voteInfo=t},checkGuessResult:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,C(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:a=e.sent,i=a.data,r("updateUserGuessResult",i);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getUserGuessStatistic:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,t.state,e.next=3,j(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:a=e.sent,i=a.data,i.result.totalAwardAmt&&Cookies.set("totalAwardAmt",i.result.totalAwardAmt),r({type:"updateUserGuessStatistic",data:i});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}},L=(n("f3/d"),n("vhlf"));function B(e){return D.apply(this,arguments)}function D(){return D=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.get_auth_path,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),D.apply(this,arguments)}function E(e){return G.apply(this,arguments)}function G(){return G=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.login_with_wechat,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),G.apply(this,arguments)}function N(e){return P.apply(this,arguments)}function P(){return P=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.bind_phone,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),P.apply(this,arguments)}function W(e){return J.apply(this,arguments)}function J(){return J=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.activity_water_chance,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),J.apply(this,arguments)}function V(e){return M.apply(this,arguments)}function M(){return M=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.activity_water_update,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),M.apply(this,arguments)}function z(e){return q.apply(this,arguments)}function q(){return q=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.activity_water_join,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),q.apply(this,arguments)}function H(e){return Q.apply(this,arguments)}function Q(){return Q=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.wechat_config,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),Q.apply(this,arguments)}n("jE9Z");var K={namespaced:!0,state:{sendCode:"发送验证码",countDown:60,timestampNow:0},mutations:{updateMatchlist:function(e,t){e.matchList=t.data.result.data;for(var n=0,r=e.matchList.length;n<r;n++)"group"!=e.matchList[n].matchType?e.grayBtn=!0:e.grayBtn=!1},updateTimestamp:function(e,t){e.timestampNow=Date.now()}},actions:{updateTimestamp:function(e){var t=e.commit;t("updateTimestamp")},bindPhone:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.commit,t.state,t.rootState,console.log("bindPhone",n),!n.phone||/^(0|86|17951)?(1[23456789][0-9])[0-9]{8}$/.test(n.phone)){e.next=5;break}return Object(s["Toast"])("请输入正确的手机号"),e.abrupt("return");case 5:if(0!=n.code.length){e.next=9;break}return Object(s["Toast"])("请输入验证码"),e.abrupt("return");case 9:if(0!=n.imgCode.length){e.next=12;break}return Object(s["Toast"])("请输入图形验证码"),e.abrupt("return");case 12:return e.next=14,N(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 14:if(r=e.sent,a=r.data,"undefined"==typeof a.code){e.next=25;break}if(0!=a.code){e.next=21;break}return e.abrupt("return",!0);case 21:return Object(s["Toast"])(a.result),e.abrupt("return",!1);case 23:e.next=27;break;case 25:return Object(s["Toast"])("网络开小差啦，请稍后再试"),e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),checkLogin:function(e,t){e.state;var n=e.rootState;console.log("checkLogin",n.IS_APP);var r=n.UA;if(r.indexOf("closer-ios")>-1)console.log("module closer-ios"),setTimeout(function(){setupWebViewJavascriptBridge(function(e){console.log("ios bridge",e),e&&e.callHandler("getUserToken",null,function(e,n){console.log("ios token",e),e?(Cookies.set("GroukAuth",e,{expires:30}),axios.post(o["a"].admin.user_show).then(function(e){var n=e.data;console.log("ios",n.result),n.result?(Cookies.set("user",JSON.stringify(n.result),{expires:30}),t(!0)):t()}).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")})):(console.log("ios jumpLogin"),setupWebViewJavascriptBridge(function(e){e.callHandler("jumpLogin",null)}),t())})})},500);else if(r.indexOf("closer-android")>-1){if(console.log("closer-android"),console.log("module android","undefined"!=typeof window.bridge),"undefined"!=typeof window.bridge){var a=window.bridge.getUserToken(null);console.log("android",a),a?(Cookies.set("GroukAuth",a,{expires:30}),setTimeout(function(){axios.post(o["a"].admin.user_show).then(function(e){var n=e.data;console.log("android",n.result),n.result?(Cookies.set("user",JSON.stringify(n.result),{expires:30}),t(!0)):t()}).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")})},1e3)):(console.log("android jumpLogin"),window.bridge.jumpLogin(null),t())}}else t()},getAuthPath:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.rootState,t.state,a={path:o["a"].wxLoginUrl},r.IS_DEV&&(a.path=o["a"].wxLoginDevUrl),e.next=5,B(a).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 5:i=e.sent,u=i.data,"undefined"!=typeof u.code&&0==u.code&&(location.href=u.result);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),loginWithWechat:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.rootState,r=t.dispatch,a={plateform:2,protocol:"WEB_SOCKET"},a["code"]=n,e.next=5,E(a).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 5:if(i=e.sent,o=i.data,"undefined"==typeof o.code||0!=o.code){e.next=12;break}return console.log("loginWithWechat",o.result),e.abrupt("return",o.result);case 12:return e.next=14,r("getAuthPath");case 14:return e.abrupt("return");case 15:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),waterChance:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return Object(L["a"])(t),e.next=3,W(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:if(r=e.sent,a=r.data,"undefined"==typeof a.code||0!=a.code){e.next=9;break}return e.abrupt("return",a.result);case 9:return Object(s["Toast"])("网络开小差啦，请稍后再试"),e.abrupt("return");case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),waterUpdate:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(Object(L["a"])(t),console.log("info",n),0!=n.name.length){e.next=5;break}return Object(s["Toast"])("请输入真实姓名"),e.abrupt("return");case 5:if(0!=n.address.length){e.next=10;break}return Object(s["Toast"])("请输入收货地址"),e.abrupt("return");case 10:if(!(n.address.length<12)){e.next=15;break}return Object(s["Toast"])("收货地址不少于12字"),e.abrupt("return");case 15:if(!(n.address.length>50)){e.next=18;break}return Object(s["Toast"])("收货地址太长，最多50字"),e.abrupt("return");case 18:return e.next=20,V(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 20:if(r=e.sent,a=r.data,"undefined"==typeof a.code||0!=a.code){e.next=26;break}return e.abrupt("return",!0);case 26:return Object(s["Toast"])("网络开小差啦，请稍后再试"),e.abrupt("return");case 28:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),waterJoin:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,e.next=3,z(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:if(r=e.sent,a=r.data,"undefined"==typeof a.code||0!=a.code){e.next=9;break}return e.abrupt("return",a.result);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),wechatConfig:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.rootState,r={url:location.href},e.next=4,H(r).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 4:if(a=e.sent,i=a.data,"undefined"==typeof i.code||0!=i.code){e.next=10;break}return e.abrupt("return",i.result);case 10:return e.abrupt("return");case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}};function X(e){return Z.apply(this,arguments)}function Z(){return Z=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.get_invite_statistic,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),Z.apply(this,arguments)}function $(e){return Y.apply(this,arguments)}function Y(){return Y=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.get_yesterday_award_amt,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),Y.apply(this,arguments)}function F(e){return ee.apply(this,arguments)}function ee(){return ee=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.get_invitee_page_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),ee.apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return ne=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.remind_login,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),ne.apply(this,arguments)}var re={namespaced:!0,state:{pullNewStatic:{awardTotalAmt:0,invitedUsers:{1:{amount:1e3,isGrey:!0},2:{amount:200,isGrey:!0},3:{amount:200,isGrey:!0},4:{amount:200,isGrey:!0},5:{amount:200,isGrey:!0},6:{amount:200,isGrey:!0},7:{amount:1e3,isGrey:!0}}},awardAmt:0},mutations:{updatePullNewStatic:function(e,t){e.pullNewStatic=t},updateAwardAmt:function(e,t){e.awardAmt=t}},actions:{checkLogin:function(e,t){e.state;var n=e.rootState,r=n.UA;if(r.indexOf("closer-ios")>-1)setTimeout(function(){setupWebViewJavascriptBridge(function(e){e&&e.callHandler("getUserToken",null,function(e,n){e?(Cookies.set("GroukAuth",e,{expires:30}),axios.post(o["a"].admin.user_show).then(function(e){var n=e.data;n.result?(Cookies.set("user",JSON.stringify(n.result),{expires:30}),t(!0)):(Cookies.remove("user"),Cookies.remove("GroukAuth"),t())}).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")})):(Cookies.remove("user"),Cookies.remove("GroukAuth"),setupWebViewJavascriptBridge(function(e){e.callHandler("jumpLogin",null)}),t())})})},500);else if(r.indexOf("closer-android")>-1){if("undefined"!=typeof window.bridge){var a=window.bridge.getUserToken(null);a?(Cookies.set("GroukAuth",a,{expires:30}),axios.post(o["a"].admin.user_show).then(function(e){var n=e.data;n.result?(Cookies.set("user",JSON.stringify(n.result),{expires:30}),t(!0)):(Cookies.remove("user"),Cookies.remove("GroukAuth"),t())}).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")})):(Cookies.remove("user"),Cookies.remove("GroukAuth"),window.bridge.jumpLogin(null),t())}}else t()},getPullNewInfo:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,u,c,l,p,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,X(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:if(a=e.sent,i=a.data,"undefined"!=typeof i.code&&0==i.code&&"undefined"!=typeof i.result.inviteUserTotalCount){if(o={},u=i.result.inviteUserTotalCount,c=i.result.invitedUsers,u<4)for(l=0;l<7;l++)c[l]?o[l+1]=c[l]:(p=200,(l+1)%7!=0&&0!=l||(p=1e3),o[l+1]={amount:p,isGrey:!0});else for(l=0;l<7;l++)c[l]?o[u-3+l]=c[l]:(d=200,(u-3+l)%7==0&&(d=1e3),o[u-3+l]={amount:d,isGrey:!0});i.result.invitedUsers=o,r("updatePullNewStatic",i.result)}case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getYesterdayAwardAmt:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,$(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:a=e.sent,i=a.data,"undefined"!=typeof i.code&&0==i.code&&r("updateAwardAmt",i.result);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getInviteUserList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.commit,e.next=3,F(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:if(r=e.sent,a=r.data,"undefined"==typeof a.code||0!=a.code){e.next=7;break}return e.abrupt("return",a.result);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),remindLogin:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,e.next=3,te(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:if(a=e.sent,i=a.data,"undefined"==typeof i.code||0!=i.code){e.next=9;break}return Object(s["Toast"])("提醒成功喽~"),r("getPullNewInfo"),e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}},ae=n("a94B"),ie={wechatConfig:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("service--",t),e.next=3,axios.post(o["a"].admin.wechat_config,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getUserInfoInApp:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.user_show);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkWxCode:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.check_wechat,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),loginWithWx:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].admin.login_with_wechat,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getStatistic:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.tuzhu.get_question_statistic,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getRankList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,axios.post(o["a"].activity.tuzhu.get_rank_list,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),startTest:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,axios.post(o["a"].activity.tuzhu.start_test,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),endTest:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("endTest",t),e.next=3,axios.post(o["a"].activity.tuzhu.end_test,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),userShare:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(1,t),e.next=3,axios.post(o["a"].activity.tuzhu.share_user_answer,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),userDefaultShare:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(1,t),e.next=3,axios.post(o["a"].activity.tuzhu.get_default_share,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},oe=n("+n12"),se=(n("Po9p"),{namespaced:!0,state:{isLogin:!1,activityId:2,inviter:"",user:{},statistic:{maxAwardAmt:1e4,totalAwardAmt:0,chance:0,rank:0,signSalt:""},rank:{selfRank:{user:{}},rankList:[]},startResult:{},startData:[],questions:{currentQuesitionNum:0},endData:{},shareData:""},mutations:{SET_USER:function(e,t){e.user=t,e.isLogin=!0},SET_STATISTIC:function(e,t){e.statistic=t},SET_RANKLIST:function(e,t){e.rank=t},startData:function(e,t){var n=t.data.result;e.startResult=n,e.startData=n.questions},endData:function(e,t){var n=t.data;e.endData=n.result,n.result.totalAwardAmt&&(e.statistic.totalAwardAmt=n.result.totalAwardAmt)},shareData:function(e,t){var n=t.data.result;e.shareData=n.shareUrl||n.defaultShareUrl},SET_PARAMS:function(e,t){var n=t.inviter,r=t.activityId;r&&(e.activityId=r),n&&(e.inviter=n)},updateChance:function(e){var t=e.statistic.chance;e.statistic.chance=--t},updateCurrentQuestionNum:function(e){e.questions.currentQuesitionNum=0,console.log(123,e.questions.currentQuesitionNum)},nextQuestion:function(e){var t=e.questions.currentQuesitionNum;e.questions.currentQuesitionNum=++t}},actions:{updateChance:function(e){var t=e.commit;t("updateChance")},updateCurrentQuestionNum:function(e){var t=e.commit;t("updateCurrentQuestionNum")},userShare:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,u,c,l,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.commit,!sessionStorage.userAnswerId){e.next=10;break}return i={userAnswerId:sessionStorage.userAnswerId},e.next=5,ie.userShare(i).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 5:o=e.sent,u=o.data,void 0!=Object(ae["a"])(u.code)&&0==u.code?a({type:"shareData",data:u}):u.result&&Object(s["Toast"])(u.result),e.next=17;break;case 10:return c={activityId:r.activityId},console.log("default share--",c),e.next=14,ie.userDefaultShare(c).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 14:l=e.sent,p=l.data,void 0!=Object(ae["a"])(p.code)&&0==p.code?a({type:"shareData",data:p}):p.result&&Object(s["Toast"])(p.result);case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),checkParams:function(e,t){var n=e.commit,r=t.params,a=t.activityId,i=t.inviter;try{r=JSON.parse(decodeURIComponent(r))}catch(e){r={}}a=r.activityId||a,i=r.inviter||i,console.log("params:",a,i),n("SET_PARAMS",{activityId:a,inviter:i})},checkLoginInApp:function(e,t){e.state;var n=e.commit,r=e.rootState;console.log("checkLogin",r.IS_APP);var a=r.UA;if(a.indexOf("closer-ios")>-1)console.log("module closer-ios"),setTimeout(function(){setupWebViewJavascriptBridge(function(e){console.log("ios bridge",e),e&&e.callHandler("getUserToken",null,function(e,r){console.log("ios token",e),e?(Cookies.set("GroukAuth",e,{expires:30}),ie.getUserInfoInApp().then(function(e){var r=e.data;if(console.log("ios",r.result),r.result){var a=r.result;Cookies.set("user",a,{expires:30}),n("SET_USER",a),t(!0)}else t()}).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")})):(console.log("ios jumpLogin"),setupWebViewJavascriptBridge(function(e){e.callHandler("jumpLogin",null)}),t())})})},500);else if(a.indexOf("closer-android")>-1){if(console.log("closer-android"),console.log("module android","undefined"!=typeof window.bridge),"undefined"!=typeof window.bridge){var i=window.bridge.getUserToken(null);console.log("android",i),i?(Cookies.set("GroukAuth",i,{expires:30}),ie.getUserInfoInApp().then(function(e){var r=e.data;if(console.log("android",r.result),r.result){var a=r.result;Cookies.set("user",a,{expires:30}),n("SET_USER",a),t(!0)}else t()}).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")})):(console.log("android jumpLogin"),window.bridge.jumpLogin(null),t())}}else t()},getUserInfoAndLoginWithWx:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s,u,c,l,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.state,a=t.commit,i=n.code,o=n.inviter,o=r.inviter||o,s={plateform:2,code:i,inviter:o,protocol:"WEB_SOCKET"},u=Cookies.get("user"),c=Cookies.get("GroukAuth"),!u||!c){e.next=12;break}return console.log("user-from-cookie:",JSON.parse(u)),a("SET_USER",JSON.parse(u)),e.abrupt("return",!0);case 12:return e.next=14,ie.loginWithWx(s);case 14:if(l=e.sent,p=l.data,0!=p.code){e.next=26;break}return u=p.result.user,c=p.result.token,console.log("user-from-server:",u),a("SET_USER",u),Cookies.set("GroukAuth",c,{expires:7}),Cookies.set("user",u,{expires:7}),e.abrupt("return",!0);case 26:return e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getStatistic:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.next=3,ie.getStatistic({activityId:r.activityId});case 3:a=e.sent,i=a.data,console.log(i.code,i.result),0==i.code?n("SET_STATISTIC",i.result):Object(s["Toast"])("网络开小差啦，请稍后再试");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getRankList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.next=3,ie.getRankList({activityId:r.activityId,inviteUser:r.inviter});case 3:a=e.sent,i=a.data,0==i.code?n("SET_RANKLIST",i.result):Object(s["Toast"])("网络开小差啦，请稍后再试");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),startTest:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=t.state,i={activityId:a.activityId},e.next=4,ie.startTest(i).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 4:if(o=e.sent,u=o.data,void 0==Object(ae["a"])(u.code)||0!=u.code){e.next=10;break}r({type:"startData",data:u}),e.next=12;break;case 10:return Object(s["Toast"])("网络开小差啦，请稍后再试"),e.abrupt("return");case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),nextQuestion:function(e,t){var n=e.state,r=e.commit;r("nextQuestion"),n.questions.currentQuesitionNum,n.startData.length},commitTest:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,a=t.commit,e.next=3,ie.endTest(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")});case 3:i=e.sent,o=i.data,console.log(3,o),Object(ae["a"])(void 0!=o.code)&&0==o.code?(a({type:"endData",data:o}),v["a"].push({name:"localResult"}),window.sessionStorage.userAnswerId=r.endData.userAnswerId):o.result&&Object(s["Toast"])(o.result);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),initWxConfig:function(e){var t=e.state,n=(e.rootState,{url:location.href});ie.wechatConfig(n).catch(function(e){Object(s["Toast"])("网络开小差啦，请稍后再试")}).then(function(e){var n=e.data,r={},a=Object(oe["a"])(location.origin+"/local",{inviter:t.user.objectID,activityId:t.activityId});"undefined"!=typeof n.code&&0==n.code&&(r=n.result,console.log("wxConfig::",a),r&&r.signature&&r.appId&&r.nonceStr&&r.timestamp&&(wx.config({debug:!1,signature:r.signature,appId:r.appId,nonceStr:r.nonceStr,timestamp:r.timestamp,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),wx.ready(function(){console.log("ready"),wx.onMenuShareAppMessage({title:"是成都人就来瓜分百万大奖",desc:"参与成都人纯度测试，纯度越高，奖金越多！",link:a,imgUrl:"http://file.tiejin.cn/public/9Ykg0XgzgX/share_img.png",type:"",dataUrl:"",success:function(){Object(s["Toast"])("分享成功~")}}),wx.onMenuShareTimeline({title:"是成都人就来瓜分百万大奖",link:a,imgUrl:"http://file.tiejin.cn/public/9Ykg0XgzgX/share_img.png",success:function(){Object(s["Toast"])("分享成功~")}})}),wx.error(function(e){console.log("error",e)})))})}}});r["default"].use(a["a"]);t["a"]=new a["a"].Store({state:{UA:"",IS_APP:!1,IS_WX:!1,IS_NEW_USER:!1,IS_DEV:!1,V_1_2_3:!1},modules:{index:b,activity:I,tbLogin:K,pullNew:re,local:se}})}});
//# sourceMappingURL=app.b8831325.js.map