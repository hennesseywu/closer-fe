{"version":3,"sources":["webpack:///./src/pages/local/index/index.vue?1d00","webpack:///src/pages/local/index/index.vue","webpack:///./src/pages/local/index/index.vue?d49c","webpack:///./src/pages/local/index/index.vue","webpack:///./src/pages/local/index/index.vue?0f9a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","$event","handleShare","showRankingList","_v","showRule","class","active","mounted","style","width","currentWidth","statistic","totalAwardAmt","showAmount","_s","currentTotalAmount","domProps","innerHTML","currentDesc","handleStart","chance","attrs","show","dialog","share","content","close","closeDialog","staticRenderFns","name","data","components","localDialog","computed","Object","objectSpread","vuex_esm","maxAwardAmt","remainTimesToMax","Math","ceil","utils","toFixed","concat","created","_this","self","SET_ACTIVITYID","activityId","IS_APP","checkLoginInApp","getStatistic","IS_WX","getUserInfoAndLoginWithWx","$route","query","then","sign","initWxConfig","methods","rate","count","arguments","length","undefined","parseInt","pow","checkOtherEnv","$router","push","console","log","_this2","setTimeout","local_indexvue_type_script_lang_js","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_10_oneOf_2_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_10_oneOf_2_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_2_3_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_7364d4bc_lang_less_scoped_true__WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/7.8184934e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main index\"},[_c('div',{staticClass:\"share\",on:{\"click\":function($event){_vm.handleShare()}}}),_c('section',{staticClass:\"tab\"},[_c('div',{staticClass:\"tab-default tab-left\",on:{\"click\":function($event){_vm.showRankingList()}}},[_vm._v(\"好友排行榜\")]),_c('div',{staticClass:\"tab-default tab-right\",on:{\"click\":function($event){_vm.showRule()}}},[_vm._v(\"活动规则\")])]),_c('section',{staticClass:\"hd animated bounceInDown fast\"},[_c('div',{staticClass:\"hd-default hd-1\",class:{active: _vm.mounted}}),_c('div',{staticClass:\"hd-default hd-2\",class:{active: _vm.mounted}}),_c('div',{staticClass:\"hd-default hd-3\",class:{active: _vm.mounted}}),_c('div',{staticClass:\"hd-default hd-4\",class:{active: _vm.mounted}}),_c('div',{staticClass:\"hd-img\"})]),_c('section',{staticClass:\"bd\",class:{active: _vm.mounted}},[_c('div',{staticClass:\"bd-progress\"},[_c('div',{staticClass:\"bd-complete\",style:({width: _vm.currentWidth})})]),_c('div',{staticClass:\"bd-scale\"},[_c('div',{staticClass:\"bd-scale-default bd-scale-0\",class:{active: _vm.statistic.totalAwardAmt > _vm.showAmount(0)}},[_c('span',{staticClass:\"bd-arrow bd-arrow-left\"}),_c('span',{staticClass:\"bd-scale-amount\"},[_vm._v(_vm._s(_vm.showAmount(0, 2)))])]),_c('div',{staticClass:\"bd-scale-default bd-scale-50\",class:{active: _vm.statistic.totalAwardAmt >= _vm.showAmount(.5)}},[_c('span',{staticClass:\"bd-arrow bd-arrow-center\"}),_c('span',{staticClass:\"bd-scale-amount\"},[_vm._v(_vm._s(_vm.showAmount(.5, 2)))])]),_c('div',{staticClass:\"bd-scale-default bd-scale-100\",class:{active: _vm.statistic.totalAwardAmt >= _vm.showAmount(1)}},[_c('span',{staticClass:\"bd-arrow bd-arrow-right\"}),_c('span',{staticClass:\"bd-scale-amount\"},[_vm._v(_vm._s(_vm.showAmount(1, 2)))])])]),_c('div',{staticClass:\"bd-total\"},[_vm._v(\"\\n      累计获得：\\n      \"),_c('span',{staticClass:\"bd-count\"},[_vm._v(_vm._s(_vm.currentTotalAmount))]),_vm._v(\" 元\\n    \")]),_c('div',{staticClass:\"bd-desc\",domProps:{\"innerHTML\":_vm._s(_vm.currentDesc)}}),_c('div',{staticClass:\"bd-btn animated pulse infinite delay-2\",on:{\"click\":function($event){_vm.handleStart()}}}),_c('div',{staticClass:\"bd-remain\"},[_vm._v(\"您还有\"+_vm._s(_vm.statistic.chance)+\"次答题机会\")])]),_c('section',{staticClass:\"ft\"}),_c('local-dialog',{attrs:{\"show\":_vm.dialog.show,\"share\":_vm.dialog.share,\"content\":_vm.dialog.content},on:{\"close\":_vm.closeDialog}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main index\">\n    <div class=\"share\" @click=\"handleShare()\"></div>\n    <section class=\"tab\">\n      <div class=\"tab-default tab-left\" @click=\"showRankingList()\">好友排行榜</div>\n      <div class=\"tab-default tab-right\" @click=\"showRule()\">活动规则</div>\n    </section>\n    <section class=\"hd animated bounceInDown fast\">\n      <div class=\"hd-default hd-1\" :class=\"{active: mounted}\"></div>\n      <div class=\"hd-default hd-2\" :class=\"{active: mounted}\"></div>\n      <div class=\"hd-default hd-3\" :class=\"{active: mounted}\"></div>\n      <div class=\"hd-default hd-4\" :class=\"{active: mounted}\"></div>\n      <div class=\"hd-img\"></div>\n    </section>\n    <section class=\"bd\" :class=\"{active: mounted}\">\n      <div class=\"bd-progress\">\n        <div class=\"bd-complete\" :style=\"{width: currentWidth}\"></div>\n      </div>\n      <div class=\"bd-scale\">\n        <div class=\"bd-scale-default bd-scale-0\" :class=\"{active: statistic.totalAwardAmt > showAmount(0)}\">\n          <span class=\"bd-arrow bd-arrow-left\"></span>\n          <span class=\"bd-scale-amount\">{{showAmount(0, 2)}}</span>\n        </div>\n        <div class=\"bd-scale-default bd-scale-50\" :class=\"{active: statistic.totalAwardAmt >= showAmount(.5)}\">\n          <span class=\"bd-arrow bd-arrow-center\"></span>\n          <span class=\"bd-scale-amount\">{{showAmount(.5, 2)}}</span>\n        </div>\n        <div class=\"bd-scale-default bd-scale-100\" :class=\"{active: statistic.totalAwardAmt >= showAmount(1)}\">\n          <span class=\"bd-arrow bd-arrow-right\"></span>\n          <span class=\"bd-scale-amount\">{{showAmount(1, 2)}}</span>\n        </div>\n      </div>\n      <div class=\"bd-total\">\n        累计获得：\n        <span class=\"bd-count\">{{currentTotalAmount}}</span> 元\n      </div>\n      <div class=\"bd-desc\" v-html=\"currentDesc\"></div>\n      <div class=\"bd-btn animated pulse infinite delay-2\" @click=\"handleStart()\"></div>\n      <div class=\"bd-remain\">您还有{{statistic.chance}}次答题机会</div>\n    </section>\n    <section class=\"ft\"></section>\n    <local-dialog :show=\"dialog.show\" :share=\"dialog.share\" :content=\"dialog.content\" @close=\"closeDialog\"></local-dialog>\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue';\n  import localDialog from '../components/dialog';\n  import {\n    mapState,\n    mapActions,\n    mapMutations\n  } from 'vuex';\n  import {transAmount, parseQuery} from '../../../utils/utils'\n  \n  export default {\n    name: 'localIndex',\n    data() {\n      return {\n        // mounted\n        mounted: false,\n        // 弹窗\n        dialog: {\n          // 是否显示弹窗\n          show: false,\n          // 是否为分享弹窗\n          share: false,\n          // 弹窗文字内容\n          content: '呃~没有答题机会了，<br/>快去分享给好友获取答题机会吧！'\n        }\n      }\n    },\n    components: {\n      localDialog\n    },\n    computed: {\n      ...mapState('local', ['statistic']),\n      ...mapState(['IS_APP', 'IS_WX']),\n      currentWidth() {\n        return this.statistic.totalAwardAmt*100/this.statistic.maxAwardAmt + '%'\n      },\n      remainTimesToMax() {\n        return Math.ceil(transAmount(this.statistic.maxAwardAmt - this.statistic.totalAwardAmt) / 5)\n      },\n      currentTotalAmount() {\n        return (this.statistic.totalAwardAmt/100).toFixed(2);\n      },\n      currentDesc() {\n        if (this.remainTimesToMax == 0) {\n          return `恭喜，您已获得全部${transAmount(this.statistic.maxAwardAmt)}元的现金奖励~`\n        }\n        return `您再获得${this.remainTimesToMax}次王者称号就可以拿到总计${transAmount(this.statistic.maxAwardAmt)}元的现金奖励了！`\n      }\n    },\n    created() {\n      const self = this;\n      self.SET_ACTIVITYID(parseQuery().activityId);\n      if (self.IS_APP) { \n        // 端内\n        self.checkLoginInApp(self.getStatistic);\n      } else if (self.IS_WX) {\n        // 微信端\n        // let user = Cookies.get(\"user\");\n        // if (typeof(Cookies.get(\"token\")) != \"undefined\" && typeof(user) != \"undefined\") {\n        //   self.SET_USER(JSON.parse(user))\n        // } else {\n          self.getUserInfoAndLoginWithWx(self.$route.query).then(sign => {\n            if (sign) {\n              self.getStatistic();\n              self.initWxConfig();\n            } else {\n              this.dialog.share = false;\n              this.dialog.content = '亲，请先登录再参与答题吧~';\n              this.dialog.show = true;\n            }\n          })\n        // }\n      }\n    },\n    methods: {\n      ...mapActions('local', [\n        'checkLoginInApp',\n        'getUserInfoAndLoginWithWx',\n        'getStatistic',\n        'initWxConfig'\n      ]),\n      ...mapMutations('local', [\n        'SET_USER',\n        'SET_ACTIVITYID'\n      ]),\n      // 展示金额，rate为百分比率，count为除以10的指数\n      showAmount(rate, count = 0) {\n        return parseInt(this.statistic.maxAwardAmt*rate/(10**count))\n      },\n      // 转到排行榜\n      showRankingList() {\n        if (this.checkOtherEnv()) {\n          this.$router.push({\n            name: 'localRank'\n          })\n        }\n      },\n      // 转到规则\n      showRule() {\n        this.$router.push({\n          name: 'localRule'\n        })\n      },\n      // 开始答题\n      handleStart() {\n        // this.dialog.share = true;\n        //   this.dialog.content = '亲，没有答题积会了，<br/>快去分享给好友获取答题机会吧！';\n        //   this.dialog.show = true;\n        //   return false;\n        if (this.checkOtherEnv()) {\n          this.$router.push({\n            name: 'localAnswer'\n          })\n        }\n      },\n      closeDialog() {\n        this.dialog.show = false;\n      },\n      // 其他环境下弹窗提示去微信答题\n      checkOtherEnv() {\n        console.log(this.statistic.chance)\n        if (!this.IS_APP && !this.IS_WX) {\n          this.dialog.share = false;\n          this.dialog.content = '亲，请去微信环境下答题吧';\n          this.dialog.show = true;\n          return false;\n        } else if (this.statistic.chance <= 0) {\n          this.dialog.share = true;\n          this.dialog.content = '亲，没有答题机会了，<br/>快去分享给好友获取答题机会吧！';\n          this.dialog.show = true;\n          return false;\n        } else {\n          return true;\n        }\n      },\n      // 点击分享跳转到分享页\n      handleShare() {\n        this.$router.push({\n          name: 'localShare'\n        })\n      }\n    },\n    mounted() {\n      setTimeout(() => {\n        this.mounted = true;\n      }, 800);\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../assets/style/animation.less';\n  @import '../assets/style/main.less';\n  @import '../assets/style/index.less';\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7364d4bc&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7364d4bc&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7364d4bc\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-oneOf-2-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-2-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-2-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7364d4bc&lang=less&scoped=true\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--10-oneOf-2-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js??ref--10-oneOf-2-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-2-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7364d4bc&lang=less&scoped=true\""],"sourceRoot":""}